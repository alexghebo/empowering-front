{"version":3,"sources":["../../../src/js/custom/newsfeed.js"],"names":["$","document","ready","userId","cookie","attachmentIds","on","uploads","files","uploadPicturesForPost","counter","postId","closest","attr","postsModal","loadPosts","deletePostAttachment","recentlyAddedProject","showRecentActivity","scrollTop","innerHeight","scrollHeight","editPost","likePost","ajax","type","url","baseUrl","headers","Authorization","crossDomain","async","success","response","attachments","images","length","i","html","authToken","contentType","postHTML","hide","posts","content","postTemplate","clone","show","appendTo","id","find","createdAt","replaceUrlWithHtmlLinks","liked","css","append","likes","postUserId","addClass","name","profilePicture","removeClass","j","attachmentTemplate","remainingPictures","attachmentFiles","filename","val","title","push","k","fileNamePost","substring","parent","remove","newAttachments","form","attachmentId","children","each","post","data","JSON","stringify","location","reload","attachemntIds","jsonArray","FormData","console","log","getAll","key","entries","opts","cache","processData","method","fake","xhr","jQuery","ajaxSettings","send","sendAsBinary","boundary","toString","text","exp","replace","icon","isLiked","parseInt","likeSpan","userLikes","userToken","activityTemplate","activityItem","topic","timeAgo","moment","fromNow","sharedFile","fileNameAttachments","cloneTemplateShareFile","loadAttachNewsFeed","event","attachEditPostNewsFeed","getElementById","src","URL","createObjectURL","target","onload","revokeObjectURL","createIndexPostAttach"],"mappings":"AAAAA,CAAC,CAACC,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAY;AAC5B,MAAIC,MAAM,GAAGH,CAAC,CAACI,MAAF,CAAS,YAAT,CAAb;AACA,MAAIC,aAAa,GAAG,EAApB;AACAL,EAAAA,CAAC,CAACC,QAAD,CAAD,CAAYK,EAAZ,CAAe,QAAf,EAAyB,kBAAzB,EAA6C,YAAY;AACvD,QAAIC,OAAO,GAAGP,CAAC,CAAC,aAAD,CAAD,CAAiB,CAAjB,EAAoBQ,KAAlC;AACAH,IAAAA,aAAa,GAAGI,qBAAqB,EAArC;AACD,GAHD;AAIA,MAAIC,OAAO,GAAG,CAAd;AACAV,EAAAA,CAAC,CAACC,QAAD,CAAD,CAAYK,EAAZ,CAAe,OAAf,EAAwB,wBAAxB,EAAkD,YAAY;AAC5D,QAAIK,MAAM,GAAGX,CAAC,CAAC,IAAD,CAAD,CAAQY,OAAR,CAAgB,eAAhB,EAAiCC,IAAjC,CAAsC,cAAtC,CAAb;AACAC,IAAAA,UAAU,CAACH,MAAD,CAAV;AACD,GAHD;AAIAI,EAAAA,SAAS,CAACL,OAAD,CAAT;AACAM,EAAAA,oBAAoB;AACpBC,EAAAA,oBAAoB;AACpBC,EAAAA,kBAAkB;AAClBlB,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAaM,EAAb,CAAgB,QAAhB,EAA0B,YAAY;AACpC,QACEN,CAAC,CAAC,IAAD,CAAD,CAAQmB,SAAR,KAAsBnB,CAAC,CAAC,IAAD,CAAD,CAAQoB,WAAR,EAAtB,IACApB,CAAC,CAAC,IAAD,CAAD,CAAQ,CAAR,EAAWqB,YAFb,EAGE;AACAX,MAAAA,OAAO,GAAGA,OAAO,GAAG,CAApB;AACAK,MAAAA,SAAS,CAACL,OAAD,CAAT;AACD;AACF,GARD;AASAY,EAAAA,QAAQ,CAACjB,aAAD,CAAR;AACAkB,EAAAA,QAAQ;AAERvB,EAAAA,CAAC,CAACC,QAAD,CAAD,CAAYK,EAAZ,CAAe,OAAf,EAAwB,kBAAxB,EAA4C,YAAY;AACtD,QAAIK,MAAM,GAAGX,CAAC,CAAC,IAAD,CAAD,CAAQa,IAAR,CAAa,cAAb,CAAb;AAEAb,IAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,MAAAA,IAAI,EAAE,KADD;AAELC,MAAAA,GAAG,EAAEC,OAAO,GAAG,aAAV,GAA0BhB,MAF1B;AAGLiB,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAE,YAAY7B,CAAC,CAACI,MAAF,CAAS,WAAT;AAA7B,OAHJ;AAIL0B,MAAAA,WAAW,EAAE,IAJR;AAKLC,MAAAA,KAAK,EAAE,KALF;AAMLC,MAAAA,OAAO,EAAE,UAAUC,QAAV,EAAoB;AAC3B,YAAIC,WAAW,GAAGD,QAAQ,CAACC,WAA3B;AACA,YAAIC,MAAM,GAAI,EAAd;;AACA,YAAID,WAAW,CAACE,MAAZ,GAAqB,CAAzB,EAA4B;AAC1B,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAAW,CAACE,MAAhC,EAAwCC,CAAC,EAAzC,EAA6C;AAC3CF,YAAAA,MAAM,IAAK,iGAAgGD,WAAW,CAACG,CAAD,CAAI,IAA1H;AACD;;AACDrC,UAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2BsC,IAA3B,CAAgCH,MAAhC;AACD;AACF;AAfI,KAAP;AAiBD,GApBD;AAqBD,CAjDD;;AAkDA,SAASpB,SAAT,CAAmBL,OAAnB,EAA4B;AAC1B,MAAI6B,SAAS,GAAGvC,CAAC,CAACI,MAAF,CAAS,WAAT,CAAhB;AACA,MAAID,MAAM,GAAGH,CAAC,CAACI,MAAF,CAAS,YAAT,CAAb;AACAJ,EAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,IAAAA,IAAI,EAAE,KADD;AAELC,IAAAA,GAAG,EACDC,OAAO,GACP,8BADA,GAEAxB,MAFA,GAGA,QAHA,GAIAO,OAJA,GAKA,8BARG;AASLkB,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAE,YAAYU;AADpB,KATJ;AAYLT,IAAAA,WAAW,EAAE,IAZR;AAaLU,IAAAA,WAAW,EAAE,kBAbR;AAcLR,IAAAA,OAAO,EAAGC,QAAD,IAAc;AACrB,UAAIQ,QAAQ,GAAGzC,CAAC,CAAC,eAAD,CAAhB;AACAyC,MAAAA,QAAQ,CAACC,IAAT;AACA,UAAIC,KAAK,GAAGV,QAAQ,CAACW,OAArB;;AACA,WAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGM,KAAK,CAACP,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;AACrC,YAAIQ,YAAY,GAAGJ,QAAQ,CAACK,KAAT,EAAnB;AACAD,QAAAA,YAAY,CAACE,IAAb,GAAoBC,QAApB,CAA6B,gBAA7B;AACAH,QAAAA,YAAY,CAAChC,IAAb,CAAkB,cAAlB,EAAkC8B,KAAK,CAACN,CAAD,CAAL,CAASY,EAA3C;AACAJ,QAAAA,YAAY,CAACK,IAAb,CAAkB,YAAlB,EAAgCZ,IAAhC,CAAqCK,KAAK,CAACN,CAAD,CAAL,CAASc,SAA9C;AACAN,QAAAA,YAAY,CAACK,IAAb,CAAkB,gBAAlB,EAAoCrC,IAApC,CAAyC,SAAzC,EAAoD8B,KAAK,CAACN,CAAD,CAAL,CAASY,EAA7D;AACAJ,QAAAA,YAAY,CACTK,IADH,CACQ,gBADR,EAEGZ,IAFH,CAEQc,uBAAuB,CAACT,KAAK,CAACN,CAAD,CAAL,CAASO,OAAV,CAF/B;AAGAC,QAAAA,YAAY,CAACK,IAAb,CAAkB,uBAAlB,EAA2CrC,IAA3C,CAAgD,aAAhD,EAA+D,OAA/D;AACAgC,QAAAA,YAAY,CACTK,IADH,CACQ,gBADR,EAEGrC,IAFH,CAEQ,cAFR,EAEwB8B,KAAK,CAACN,CAAD,CAAL,CAASgB,KAFjC;;AAGA,YAAIV,KAAK,CAACN,CAAD,CAAL,CAASgB,KAAb,EAAoB;AAClBR,UAAAA,YAAY,CAACK,IAAb,CAAkB,+BAAlB,EAAmDI,GAAnD,CAAuD,MAAvD,EAA+D,KAA/D;AACD;;AACDT,QAAAA,YAAY,CACTK,IADH,CACQ,gBADR,EAEGK,MAFH,CAEU,8BAA8BZ,KAAK,CAACN,CAAD,CAAL,CAASmB,KAAvC,GAA+C,SAFzD;AAGAX,QAAAA,YAAY,CACTK,IADH,CACQ,uBADR,EAEGrC,IAFH,CAEQ,aAFR,EAEuB,mBAFvB;AAGA,YAAI4C,UAAU,GAAGd,KAAK,CAACN,CAAD,CAAL,CAASlC,MAA1B;;AACA,YAAIwC,KAAK,CAACN,CAAD,CAAL,CAASlC,MAAT,KAAoBH,CAAC,CAACI,MAAF,CAAS,YAAT,CAAxB,EAAgD;AAC9CyC,UAAAA,YAAY,CAACK,IAAb,CAAkB,yBAAlB,EAA6CQ,QAA7C,CAAsD,QAAtD;AACD;;AACD1D,QAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,UAAAA,IAAI,EAAE,KADD;AAELC,UAAAA,GAAG,EAAEC,OAAO,GAAG,aAAV,GAA0B8B,UAF1B;AAGL1B,UAAAA,KAAK,EAAE,KAHF;AAILH,UAAAA,OAAO,EAAE;AACPC,YAAAA,aAAa,EAAE,YAAYU;AADpB,WAJJ;AAOLT,UAAAA,WAAW,EAAE,IAPR;AAQLU,UAAAA,WAAW,EAAE,kBARR;AASLR,UAAAA,OAAO,EAAE,UAAUC,QAAV,EAAoB;AAC3B,gBAAIA,QAAJ,EAAc;AACZ,kBAAIA,QAAQ,CAAC9B,MAAT,KAAoBH,CAAC,CAACI,MAAF,CAAS,YAAT,CAAxB,EAAgD;AAC9CyC,gBAAAA,YAAY,CACTK,IADH,CACQ,gBADR,EAEGrC,IAFH,CAGI,MAHJ,EAII,mCAAmCoB,QAAQ,CAAC9B,MAJhD;AAMA0C,gBAAAA,YAAY,CACTK,IADH,CACQ,gBADR,EAEGZ,IAFH,CAGI,4CACEL,QAAQ,CAAC9B,MADX,GAEE,IAFF,GAGE8B,QAAQ,CAAC0B,IAHX,GAIE,MAPN;AASD,eAhBD,MAgBO;AACLd,gBAAAA,YAAY,CACTK,IADH,CACQ,gBADR,EAEGZ,IAFH,CAEQ,+BAA+BL,QAAQ,CAAC0B,IAAxC,GAA+C,MAFvD;AAGD;;AAED,kBAAI1B,QAAQ,CAAC2B,cAAb,EAA6B;AAC3Bf,gBAAAA,YAAY,CACTK,IADH,CACQ,gBADR,EAEGrC,IAFH,CAGI,MAHJ,EAII,mCAAmCoB,QAAQ,CAAC9B,MAJhD;AAMA0C,gBAAAA,YAAY,CACTK,IADH,CACQ,gCADR,EAEGrC,IAFH,CAGI,KAHJ,EAII,uDACEoB,QAAQ,CAAC2B,cALf;AAOAf,gBAAAA,YAAY,CACTK,IADH,CACQ,4BADR,EAEGQ,QAFH,CAEY,QAFZ;AAGD,eAjBD,MAiBO;AACLb,gBAAAA,YAAY,CACTK,IADH,CACQ,4BADR,EAEGW,WAFH,CAEe,QAFf;AAGAhB,gBAAAA,YAAY,CACTK,IADH,CACQ,4BADR,EAEGQ,QAFH,CAEY,QAFZ;AAGD;;AACD,qBAAO,KAAP;AACD,aAjDD,MAiDO;AACL,qBAAO,IAAP;AACD;AACF;AA9DI,SAAP;AAgEA,YAAI/C,MAAM,GAAGgC,KAAK,CAACN,CAAD,CAAL,CAASY,EAAtB;;AACA,YAAIjD,CAAC,CAACI,MAAF,CAAS,YAAT,MAA2BuC,KAAK,CAACN,CAAD,CAAL,CAASlC,MAAxC,EAAgD,CAC9C;AACD;;AAED,YAAI+B,WAAW,GAAGS,KAAK,CAACN,CAAD,CAAL,CAASH,WAA3B;;AAEA,YAAIA,WAAW,CAACE,MAAZ,GAAqB,CAAzB,EAA4B;AAC1B,eAAK,IAAI0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5B,WAAW,CAACE,MAAhC,EAAwC0B,CAAC,EAAzC,EAA6C;AAC3CjB,YAAAA,YAAY,CAACK,IAAb,CAAkB,kBAAlB,EAAsCrC,IAAtC,CAA2C,aAA3C,EAA0D,OAA1D;AACAgC,YAAAA,YAAY,CACTK,IADH,CACQ,kBADR,EAEGrC,IAFH,CAEQ,aAFR,EAEuB,sBAFvB;AAGAgC,YAAAA,YAAY,CAACK,IAAb,CAAkB,kBAAlB,EAAsCrC,IAAtC,CAA2C,cAA3C,EAA2DF,MAA3D;AACD;;AACD,cAAIuB,WAAW,CAACE,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B,gBAAI2B,kBAAkB,GAAI,iGAAgG7B,WAAW,CAAC,CAAD,CAAI,UAAzI;AACAW,YAAAA,YAAY,CAACK,IAAb,CAAkB,kBAAlB,EAAsCK,MAAtC,CAA6CQ,kBAA7C;AACD;;AACD,cAAI7B,WAAW,CAACE,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B,iBAAK,IAAI0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5B,WAAW,CAACE,MAAhC,EAAwC0B,CAAC,EAAzC,EAA6C;AAC3C,kBAAIC,kBAAkB,GAAI,gGAA+F7B,WAAW,CAAC4B,CAAD,CAAI,UAAxI;AACAjB,cAAAA,YAAY,CAACK,IAAb,CAAkB,kBAAlB,EAAsCK,MAAtC,CAA6CQ,kBAA7C;AACD;AACF;;AACD,cAAI7B,WAAW,CAACE,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B,iBAAK,IAAI0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5B,WAAW,CAACE,MAAhC,EAAwC0B,CAAC,EAAzC,EAA6C;AAC3C,kBAAIC,kBAAkB,GAAI,gGAA+F7B,WAAW,CAAC4B,CAAD,CAAI,UAAxI;AACAjB,cAAAA,YAAY,CAACK,IAAb,CAAkB,kBAAlB,EAAsCK,MAAtC,CAA6CQ,kBAA7C;AACD;AACF;;AACD,cAAI7B,WAAW,CAACE,MAAZ,GAAqB,CAAzB,EAA4B;AAC1B,iBAAK,IAAI0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5B,WAAW,CAACE,MAAhC,EAAwC0B,CAAC,EAAzC,EAA6C;AAC3C,kBAAIA,CAAC,GAAG,CAAR,EAAW;AACT,oBAAIC,kBAAkB,GAAI,gGAA+F7B,WAAW,CAAC4B,CAAD,CAAI,UAAxI;AACAjB,gBAAAA,YAAY,CACTK,IADH,CACQ,kBADR,EAEGK,MAFH,CAEUQ,kBAFV;AAGD;AACF;;AAED,gBAAIC,iBAAiB,GAAG9B,WAAW,CAACE,MAAZ,GAAqB,CAA7C;AAEAS,YAAAA,YAAY,CACTK,IADH,CACQ,kBADR,EAEGK,MAFH,CAGK,mFAAkFS,iBAAkB,mBAHzG;AAKD;AACF,SA1CD,MA0CO;AACLnB,UAAAA,YAAY,CAACK,IAAb,CAAkB,mBAAlB,EAAuCR,IAAvC;AACD;AACF;AACF;AAjKI,GAAP;AAmKD;;AAED,SAAS5B,UAAT,CAAoBmC,EAApB,EAAwB;AACtB,MAAIL,OAAO,GAAG,EAAd;AAAA,MACEV,WAAW,GAAG,EADhB;AAAA,MAEE+B,eAAe,GAAG,EAFpB;AAAA,MAGEC,QAAQ,GAAG,EAHb;AAAA,MAIEH,kBAAkB,GAAI,EAJxB;AAKA/D,EAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,IAAAA,IAAI,EAAE,KADD;AAELC,IAAAA,GAAG,EAAEC,OAAO,GAAG,aAAV,GAA0BsB,EAF1B;AAGLrB,IAAAA,OAAO,EAAE;AAAEC,MAAAA,aAAa,EAAE,YAAY7B,CAAC,CAACI,MAAF,CAAS,WAAT;AAA7B,KAHJ;AAIL0B,IAAAA,WAAW,EAAE,IAJR;AAKLC,IAAAA,KAAK,EAAE,KALF;AAMLC,IAAAA,OAAO,EAAE,UAAUC,QAAV,EAAoB;AAC3BW,MAAAA,OAAO,GAAGX,QAAQ,CAACW,OAAnB;AACAV,MAAAA,WAAW,GAAGD,QAAQ,CAACC,WAAvB;AACAlC,MAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBa,IAAzB,CAA8B,cAA9B,EAA8CoC,EAA9C;AACAjD,MAAAA,CAAC,CAAC,qCAAD,CAAD,CAAyCmE,GAAzC,CAA6CvB,OAA7C;;AACA,UAAIV,WAAW,CAACE,MAAhB,EAAwB;AACtB,aAAK,IAAI0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5B,WAAW,CAACE,MAAhC,EAAwC0B,CAAC,EAAzC,EAA6C;AAC3C9D,UAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,YAAAA,IAAI,EAAE,KADD;AAELC,YAAAA,GAAG,EAAEC,OAAO,GAAG,mBAAV,GAAgCO,WAAW,CAAC4B,CAAD,CAA3C,GAAiD,UAFjD;AAGLlC,YAAAA,OAAO,EAAE;AAAEC,cAAAA,aAAa,EAAE,YAAY7B,CAAC,CAACI,MAAF,CAAS,WAAT;AAA7B,aAHJ;AAIL0B,YAAAA,WAAW,EAAE,IAJR;AAKLC,YAAAA,KAAK,EAAE,KALF;AAMLC,YAAAA,OAAO,EAAE,UAAUC,QAAV,EAAoB;AAC3BiC,cAAAA,QAAQ,GAAGjC,QAAQ,CAACmC,KAApB;AACAH,cAAAA,eAAe,CAACI,IAAhB,CAAqB;AACnBpB,gBAAAA,EAAE,EAAEf,WAAW,CAAC4B,CAAD,CADI;AAEnBM,gBAAAA,KAAK,EAAEF;AAFY,eAArB;AAID;AAZI,WAAP;AAcD;AACF;;AACD,WAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,eAAe,CAAC7B,MAApC,EAA4CkC,CAAC,EAA7C,EAAiD;AAC/C,YAAIC,YAAY,GAAGN,eAAe,CAACK,CAAD,CAAf,CAAmBF,KAAtC;;AACA,YAAIG,YAAY,CAACnC,MAAb,GAAsB,EAA1B,EAA8B;AAC5BmC,UAAAA,YAAY,GAAGA,YAAY,CAACC,SAAb,CAAuB,CAAvB,EAA0B,EAA1B,IAAgC,OAA/C;AACD;;AACDT,QAAAA,kBAAkB,IAAK;AAC/B,qGACQE,eAAe,CAACK,CAAD,CAAf,CAAmBrB,EACpB;AACP;AACA;AACA,8EACcgB,eAAe,CAACK,CAAD,CAAf,CAAmBrB,EACpB,KAAIsB,YAAY,GAAGA,YAAH,GAAkB,UAAW;AAC1D;AACA;AACA;AACA;AACA;AACA,KAdQ;AAeD;;AACDvE,MAAAA,CAAC,CAAC,gCAAD,CAAD,CAAoCsC,IAApC,CAAyCyB,kBAAzC;AACD;AAnDI,GAAP;AAqDD;;AACD,SAAS/C,oBAAT,GAAgC;AAC9BhB,EAAAA,CAAC,CAACC,QAAD,CAAD,CAAYK,EAAZ,CAAe,OAAf,EAAwB,oBAAxB,EAA8C,YAAY;AACxDN,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQyE,MAAR,GAAiBC,MAAjB;AACD,GAFD;AAGD;;AACD,SAASpD,QAAT,CAAkBqD,cAAlB,EAAkC;AAChC3E,EAAAA,CAAC,CAACC,QAAD,CAAD,CAAYK,EAAZ,CAAe,OAAf,EAAwB,gCAAxB,EAA0D,YAAY;AACpE,QAAIsE,IAAI,GAAG5E,CAAC,CAAC,iBAAD,CAAZ;AACA,QAAIW,MAAM,GAAGiE,IAAI,CAAC/D,IAAL,CAAU,cAAV,CAAb;AACA,QAAI+B,OAAO,GAAGgC,IAAI,CAAC1B,IAAL,CAAU,UAAV,EAAsBiB,GAAtB,EAAd;AACA,QAAIjC,WAAW,GAAG,EAAlB;AACA,QAAI2C,YAAY,GAAGD,IAAI,CACpB1B,IADgB,CACX,gCADW,EAEhB4B,QAFgB,GAGhBC,IAHgB,CAGX,YAAY;AAChB7C,MAAAA,WAAW,CAACmC,IAAZ,CAAiBrE,CAAC,CAAC,IAAD,CAAD,CAAQa,IAAR,CAAa,oBAAb,CAAjB;AACD,KALgB,CAAnB;;AAMA,SAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsC,cAAc,CAACvC,MAAnC,EAA2CC,CAAC,EAA5C,EAAgD;AAC9CH,MAAAA,WAAW,CAACmC,IAAZ,CAAiBM,cAAc,CAACtC,CAAD,CAA/B;AACD;;AACD,QAAI2C,IAAI,GAAG;AACTpC,MAAAA,OADS;AAETV,MAAAA;AAFS,KAAX;;AAIA,QAAI8C,IAAI,CAACpC,OAAL,KAAiB,EAAjB,IAAuBoC,IAAI,CAAC9C,WAAL,CAAiBE,MAAjB,GAA0B,CAArD,EAAwD;AACtDpC,MAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,QAAAA,IAAI,EAAE,KADD;AAELC,QAAAA,GAAG,EAAEC,OAAO,GAAG,aAAV,GAA0BhB,MAF1B;AAGL6B,QAAAA,WAAW,EAAE,kBAHR;AAILZ,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAE,YAAY7B,CAAC,CAACI,MAAF,CAAS,WAAT;AAA7B,SAJJ;AAKL6E,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeH,IAAf,CALD;AAMLhD,QAAAA,OAAO,EAAE,YAAY;AACnBoD,UAAAA,QAAQ,CAACC,MAAT,CAAgB,IAAhB;AACD;AARI,OAAP;AAUD,KAXD,MAWO,CACN;AACF,GA/BD;AAgCD;;AACD,SAAS5E,qBAAT,GAAiC;AAC/B,MAAI6E,aAAa,GAAG,EAApB;AACA,MAAI9E,KAAK,GAAGR,CAAC,CAAC,aAAD,CAAD,CAAiB,CAAjB,EAAoBQ,KAAhC;;AAEA,OAAK,IAAI6B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7B,KAAK,CAAC4B,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;AACrC,QAAIkD,SAAS,GAAG,IAAIC,QAAJ,EAAhB;AACAD,IAAAA,SAAS,CAAChC,MAAV,CAAiB,YAAjB,EAA+B/C,KAAK,CAAC6B,CAAD,CAApC;AACAkD,IAAAA,SAAS,CAAChC,MAAV,CAAiB,OAAjB,EAA0B/C,KAAK,CAAC6B,CAAD,CAAL,CAASsB,IAAnC;AACA8B,IAAAA,OAAO,CAACC,GAAR,CAAYH,SAAS,CAACI,MAAV,CAAiB,YAAjB,CAAZ;;AAEA,SAAK,IAAIC,GAAT,IAAgBL,SAAS,CAACM,OAAV,EAAhB,EAAqC;AACnCJ,MAAAA,OAAO,CAACC,GAAR,CAAYE,GAAG,CAAC,CAAD,CAAH,GAAS,IAAT,GAAgBA,GAAG,CAAC,CAAD,CAA/B;AACD;;AAED,QAAIE,IAAI,GAAG;AACTpE,MAAAA,GAAG,EAAEC,OAAO,GAAG,kBADN;AAETsD,MAAAA,IAAI,EAAEM,SAFG;AAGTQ,MAAAA,KAAK,EAAE,KAHE;AAIThE,MAAAA,KAAK,EAAE,KAJE;AAKTS,MAAAA,WAAW,EAAE,KALJ;AAMTwD,MAAAA,WAAW,EAAE,KANJ;AAOTC,MAAAA,MAAM,EAAE,MAPC;AAQTxE,MAAAA,IAAI,EAAE,MARG;AAST;AACAG,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAY7B,CAAC,CAACI,MAAF,CAAS,WAAT;AADpB,OAVA;AAaT4B,MAAAA,OAAO,EAAE,UAAUiD,IAAV,EAAgB;AACvBK,QAAAA,aAAa,CAACjB,IAAd,CAAmBY,IAAI,CAAChC,EAAxB;AAEA,YAAItC,MAAM,GAAGsE,IAAI,CAAChC,EAAlB;AACAjD,QAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,UAAAA,IAAI,EAAE,KADD;AAELC,UAAAA,GAAG,EAAEC,OAAO,GAAG,mBAAV,GAAgChB,MAAhC,GAAyC,UAFzC;AAGLiB,UAAAA,OAAO,EAAE;AAAEC,YAAAA,aAAa,EAAE,YAAY7B,CAAC,CAACI,MAAF,CAAS,WAAT;AAA7B,WAHJ;AAIL0B,UAAAA,WAAW,EAAE,IAJR;AAKLC,UAAAA,KAAK,EAAE,KALF;AAMLC,UAAAA,OAAO,EAAE,UAAUC,QAAV,EAAoB;AAC3B,gBAAIiC,QAAQ,GAAGjC,QAAQ,CAACmC,KAAxB;;AACA,gBAAIF,QAAQ,CAAC9B,MAAT,GAAkB,EAAtB,EAA0B;AACxB8B,cAAAA,QAAQ,GAAGA,QAAQ,CAACM,SAAT,CAAmB,CAAnB,EAAsB,EAAtB,IAA4B,OAAvC;AACD;;AACDxE,YAAAA,CAAC,CAAC,gCAAD,CAAD,CACGuD,MADH,CACW,gGAA+F5C,MAAO;AAC7H;AACA;AACA,wBAAwBuD,QAAQ,GAAGA,QAAH,GAAc,UAAW;AACzD;AACA;AACA;AACA;AACA,kBATY;AAUD;AArBI,SAAP;AAuBD;AAxCQ,KAAX;;AA2CA,QAAIqB,SAAS,CAACW,IAAd,EAAoB;AAClB;AACAJ,MAAAA,IAAI,CAACK,GAAL,GAAW,YAAY;AACrB,YAAIA,GAAG,GAAGC,MAAM,CAACC,YAAP,CAAoBF,GAApB,EAAV;AACAA,QAAAA,GAAG,CAACG,IAAJ,GAAWH,GAAG,CAACI,YAAf;AACA,eAAOJ,GAAP;AACD,OAJD;;AAMAL,MAAAA,IAAI,CAACtD,WAAL,GAAmB,mCAAmC+C,SAAS,CAACiB,QAAhE;AACAV,MAAAA,IAAI,CAACb,IAAL,GAAYM,SAAS,CAACkB,QAAV,EAAZ;AACD;;AAED,QAAIxE,QAAQ,GAAGmE,MAAM,CAAC5E,IAAP,CAAYsE,IAAZ,CAAf;AACD;;AACD,SAAOR,aAAP;AACD;;AACD,SAASlC,uBAAT,CAAiCsD,IAAjC,EAAuC;AACrC,MAAIC,GAAG,GACL,4EADF;AAEA,SAAOD,IAAI,CAACE,OAAL,CAAaD,GAAb,EAAkB,qBAAlB,CAAP;AACD;;AACD,SAASpF,QAAT,GAAoB;AAClBvB,EAAAA,CAAC,CAACC,QAAD,CAAD,CAAYK,EAAZ,CAAe,OAAf,EAAwB,gBAAxB,EAA0C,YAAY;AACpD,QAAIH,MAAM,GAAGH,CAAC,CAACI,MAAF,CAAS,YAAT,CAAb;AACA,QAAImC,SAAS,GAAGvC,CAAC,CAACI,MAAF,CAAS,WAAT,CAAhB;AACA,QAAIO,MAAM,GAAGX,CAAC,CAAC,IAAD,CAAD,CAAQa,IAAR,CAAa,SAAb,CAAb;AACA,QAAIgG,IAAI,GAAG7G,CAAC,CAAC,IAAD,CAAD,CAAQkD,IAAR,CAAa,gBAAb,CAAX;AACA,QAAI4D,OAAO,GAAG9G,CAAC,CAAC,IAAD,CAAf;AAEA,QAAIwD,KAAK,GAAGuD,QAAQ,CAAC/G,CAAC,CAAC,IAAD,CAAD,CAAQkD,IAAR,CAAa,YAAb,EAA2BwD,IAA3B,EAAD,EAAoC,EAApC,CAAR,GAAkD,CAA9D;AACA,QAAIM,QAAQ,GAAGhH,CAAC,CAAC,IAAD,CAAD,CAAQkD,IAAR,CAAa,YAAb,CAAf;;AACA,QAAI4D,OAAO,CAACjG,IAAR,CAAa,cAAb,MAAiC,MAArC,EAA6C;AAC3Cb,MAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,QAAAA,IAAI,EAAE,KADD;AAELC,QAAAA,GAAG,EAAEC,OAAO,GAAG,aAAV,GAA0BhB,MAA1B,GAAmC,QAAnC,GAA8CR,MAF9C;AAGL4B,QAAAA,KAAK,EAAE,KAHF;AAILH,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAE,YAAYU;AADpB,SAJJ;AAOLT,QAAAA,WAAW,EAAE,IAPR;AAQLU,QAAAA,WAAW,EAAE,kBARR;AASLR,QAAAA,OAAO,EAAE,UAAUC,QAAV,EAAoB;AAC3B4E,UAAAA,IAAI,CAACvD,GAAL,CAAS,MAAT,EAAiB,KAAjB;AACA0D,UAAAA,QAAQ,CAACN,IAAT,CAAclD,KAAd;AACAsD,UAAAA,OAAO,CAACjG,IAAR,CAAa,cAAb,EAA6B,MAA7B;AACD;AAbI,OAAP;AAeD,KAhBD,MAgBO,IAAIiG,OAAO,CAACjG,IAAR,CAAa,cAAb,MAAiC,MAArC,EAA6C;AAClDb,MAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,QAAAA,IAAI,EAAE,KADD;AAELC,QAAAA,GAAG,EAAEC,OAAO,GAAG,aAAV,GAA0BhB,MAA1B,GAAmC,UAAnC,GAAgDR,MAFhD;AAGL4B,QAAAA,KAAK,EAAE,KAHF;AAILH,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAE,YAAYU;AADpB,SAJJ;AAOLT,QAAAA,WAAW,EAAE,IAPR;AAQLU,QAAAA,WAAW,EAAE,kBARR;AASLR,QAAAA,OAAO,EAAE,UAAUC,QAAV,EAAoB;AAC3B4E,UAAAA,IAAI,CAACpC,MAAL,GACGnC,IADH,CACS;AACnB;AACA;AACA;AACA;AACA,uCANU;AAOA0E,UAAAA,QAAQ,CAACN,IAAT,CAAczE,QAAQ,CAACgF,SAAT,CAAmB7E,MAAjC;AACA0E,UAAAA,OAAO,CAACjG,IAAR,CAAa,cAAb,EAA6B,OAA7B;AACD;AAnBI,OAAP;AAqBD;AACF,GAhDD;AAiDD;;AACD,SAASK,kBAAT,GAA8B;AAC5B,MAAIgG,SAAS,GAAGlH,CAAC,CAACI,MAAF,CAAS,WAAT,CAAhB;AACAJ,EAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,IAAAA,IAAI,EAAE,KADD;AAELC,IAAAA,GAAG,EAAEC,OAAO,GAAG,qBAFV;AAGLI,IAAAA,KAAK,EAAE,KAHF;AAILH,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAE,YAAYqF;AADpB,KAJJ;AAOLpF,IAAAA,WAAW,EAAE,IAPR;AAQLU,IAAAA,WAAW,EAAE,kBARR;AASLR,IAAAA,OAAO,EAAE,UAAUC,QAAV,EAAoB;AAC3B,UAAIkF,gBAAgB,GAAGnH,CAAC,CAAC,uBAAD,CAAD,CAA2BkD,IAA3B,CAAgC,IAAhC,CAAvB;AACAiE,MAAAA,gBAAgB,CAACzE,IAAjB;;AACA,UAAIT,QAAQ,CAACG,MAAT,GAAkB,CAAtB,EAAyB;AACvB,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,QAAQ,CAACG,MAA7B,EAAqCC,CAAC,EAAtC,EAA0C;AACxC,cAAI+E,YAAY,GAAGD,gBAAgB,CAACpE,IAAjB,EAAnB;AACAqE,UAAAA,YAAY,CAACtE,KAAb;AACAsE,UAAAA,YAAY,CAAClE,IAAb,CAAkB,sBAAlB,EAA0CZ,IAA1C,CAA+CL,QAAQ,CAACI,CAAD,CAAR,CAAYgF,KAA3D;AACA,cAAIC,OAAO,GAAGC,MAAM,CAACtF,QAAQ,CAACI,CAAD,CAAR,CAAYc,SAAb,CAAN,CAA8BqE,OAA9B,EAAd;AACAJ,UAAAA,YAAY,CAAClE,IAAb,CAAkB,qBAAlB,EAAyCZ,IAAzC,CAA8CgF,OAA9C;AACD;AACF,OARD,MAQO;AACL,YAAIF,YAAY,GAAGD,gBAAgB,CAACpE,IAAjB,EAAnB;AACAqE,QAAAA,YAAY,CAACtE,KAAb;AACAsE,QAAAA,YAAY,CACTlE,IADH,CACQ,sBADR,EAEGZ,IAFH,CAEQ,iCAFR;AAGA8E,QAAAA,YAAY,CAAClE,IAAb,CAAkB,qBAAlB,EAAyCR,IAAzC;AACD;AACF;AA5BI,GAAP;AA8BD;;AACD,SAASzB,oBAAT,GAAgC;AAC9B,MAAId,MAAM,GAAGH,CAAC,CAACI,MAAF,CAAS,YAAT,CAAb;AACA,MAAImC,SAAS,GAAGvC,CAAC,CAACI,MAAF,CAAS,WAAT,CAAhB;AACAJ,EAAAA,CAAC,CAACwB,IAAF,CAAO;AACLC,IAAAA,IAAI,EAAE,KADD;AAELC,IAAAA,GAAG,EAAEC,OAAO,GAAG,aAAV,GAA0BxB,MAA1B,GAAmC,cAFnC;AAGLyB,IAAAA,OAAO,EAAE;AAAEC,MAAAA,aAAa,EAAE,YAAYU;AAA7B,KAHJ;AAILT,IAAAA,WAAW,EAAE,IAJR;AAKLE,IAAAA,OAAO,EAAE,UAAUiD,IAAV,EAAgB;AACvB,UAAIzE,KAAK,GAAGyE,IAAI,CAACrC,OAAjB;;AACA,UAAIpC,KAAK,CAAC4B,MAAV,EAAkB;AAChB,YAAIqF,UAAU,GAAGzH,CAAC,CAAC,qBAAD,CAAlB;AACAyH,QAAAA,UAAU,CAAC/D,QAAX,CAAoB,QAApB;;AACA,aAAK,IAAIrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7B,KAAK,CAAC4B,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;AACrC,cAAIqF,mBAAmB,GAAGlH,KAAK,CAAC6B,CAAD,CAAL,CAAS+B,KAAnC;;AACA,cAAIsD,mBAAmB,CAACtF,MAApB,GAA6B,EAAjC,EAAqC;AACnCsF,YAAAA,mBAAmB,GACjBA,mBAAmB,CAAClD,SAApB,CAA8B,CAA9B,EAAiC,EAAjC,IAAuC,OADzC;AAED;;AACD,cAAInC,CAAC,GAAG,CAAR,EAAW;AACT,gBAAIsF,sBAAsB,GAAGF,UAAU,CAAC3E,KAAX,EAA7B;AACA6E,YAAAA,sBAAsB,CACnB9D,WADH,CACe,QADf,EAEGb,QAFH,CAEY,qBAFZ;AAGA2E,YAAAA,sBAAsB,CACnBzE,IADH,CACQ,wBADR,EAEGZ,IAFH,CAGI,cACEX,OADF,GAEE,mBAFF,GAGEnB,KAAK,CAAC6B,CAAD,CAAL,CAASY,EAHX,GAIE,IAJF,GAKEyE,mBALF,GAME,MATN;AAWA1H,YAAAA,CAAC,CAAC,6BAAD,CAAD,CAAiC0D,QAAjC,CAA0C,SAA1C;AACD,WAjBD,MAiBO;AACL;AACD;AACF;;AACD+D,QAAAA,UAAU,CACPhD,MADH,GAEGA,MAFH,GAGGA,MAHH,GAIGvB,IAJH,CAIQ,cAJR,EAKGA,IALH,CAKQ,GALR,EAMGrC,IANH,CAMQ,MANR,EAMgB,mBANhB;AAOD,OArCD,MAqCO;AACLb,QAAAA,CAAC,CAAC,qBAAD,CAAD,CACGsC,IADH,CACQ,+DADR,EAEGoB,QAFH,CAEY,oBAFZ;AAGA1D,QAAAA,CAAC,CAAC,6BAAD,CAAD,CAAiC0D,QAAjC,CAA0C,QAA1C;AACD;AACF;AAlDI,GAAP;AAoDD;;AAED,IAAIkE,kBAAkB,GAAG,UAAUC,KAAV,EAAiB;AACxC,MAAIC,sBAAsB,GAAG7H,QAAQ,CAAC8H,cAAT,CAC3B,wBAD2B,CAA7B;AAGAD,EAAAA,sBAAsB,CAACE,GAAvB,GAA6BC,GAAG,CAACC,eAAJ,CAAoBL,KAAK,CAACM,MAAN,CAAa3H,KAAb,CAAmB,CAAnB,CAApB,CAA7B;;AACAsH,EAAAA,sBAAsB,CAACM,MAAvB,GAAgC,YAAY;AAC1CH,IAAAA,GAAG,CAACI,eAAJ,CAAoBP,sBAAsB,CAACE,GAA3C,EAD0C,CACO;AAClD,GAFD;AAGD,CARD;;AASA,IAAIM,qBAAqB,GAAG,UAAUT,KAAV,EAAiB;AAC3C,MAAIC,sBAAsB,GAAG7H,QAAQ,CAAC8H,cAAT,CAAwB,uBAAxB,CAA7B;AACAD,EAAAA,sBAAsB,CAACE,GAAvB,GAA6BC,GAAG,CAACC,eAAJ,CAAoBL,KAAK,CAACM,MAAN,CAAa3H,KAAb,CAAmB,CAAnB,CAApB,CAA7B;;AACAsH,EAAAA,sBAAsB,CAACM,MAAvB,GAAgC,YAAY;AAC1CH,IAAAA,GAAG,CAACI,eAAJ,CAAoBP,sBAAsB,CAACE,GAA3C,EAD0C,CACO;AAClD,GAFD;AAGD,CAND","sourcesContent":["$(document).ready(function () {\n  var userId = $.cookie(\"authUserId\");\n  var attachmentIds = [];\n  $(document).on(\"change\", \"input#files-post\", function () {\n    var uploads = $(\"#files-post\")[0].files;\n    attachmentIds = uploadPicturesForPost();\n  });\n  var counter = 0;\n  $(document).on(\"click\", \"a#edit-post-modal-link\", function () {\n    var postId = $(this).closest(\"#profile-post\").attr(\"data-post-id\");\n    postsModal(postId);\n  });\n  loadPosts(counter);\n  deletePostAttachment();\n  recentlyAddedProject();\n  showRecentActivity();\n  $(\".c-body\").on(\"scroll\", function () {\n    if (\n      $(this).scrollTop() + $(this).innerHeight() >=\n      $(this)[0].scrollHeight\n    ) {\n      counter = counter + 1;\n      loadPosts(counter);\n    }\n  });\n  editPost(attachmentIds);\n  likePost();\n\n  $(document).on(\"click\", \"#attachments-row\", function () {\n    var postId = $(this).attr(\"data-post-id\");\n\n    $.ajax({\n      type: \"GET\",\n      url: baseUrl + \"/api/posts/\" + postId,\n      headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n      crossDomain: true,\n      async: false,\n      success: function (response) {\n        var attachments = response.attachments;\n        var images = ``;\n        if (attachments.length > 0) {\n          for (var i = 0; i < attachments.length; i++) {\n            images += `<img class=\"img-fluid mb-3 box-shadow\" src=\"https://api.youth-initiatives.com/api/attachments/${attachments[i]}\">`;\n          }\n          $(\"#modal-gallery-images\").html(images);\n        }\n      },\n    });\n  });\n});\nfunction loadPosts(counter) {\n  var authToken = $.cookie(\"authToken\");\n  var userId = $.cookie(\"authUserId\");\n  $.ajax({\n    type: \"GET\",\n    url:\n      baseUrl +\n      \"/api/posts/connectionsPosts/\" +\n      userId +\n      \"?page=\" +\n      counter +\n      \"&size=10&sort=createdAt,desc\",\n    headers: {\n      Authorization: \"Bearer \" + authToken,\n    },\n    crossDomain: true,\n    contentType: \"application/json\",\n    success: (response) => {\n      var postHTML = $(\"#profile-post\");\n      postHTML.hide();\n      var posts = response.content;\n      for (var i = 0; i < posts.length; i++) {\n        var postTemplate = postHTML.clone();\n        postTemplate.show().appendTo(\".posts-wrapper\");\n        postTemplate.attr(\"data-post-id\", posts[i].id);\n        postTemplate.find(\"#post-date\").html(posts[i].createdAt);\n        postTemplate.find(\"span#like-post\").attr(\"post-id\", posts[i].id);\n        postTemplate\n          .find(\"p#post-content\")\n          .html(replaceUrlWithHtmlLinks(posts[i].content));\n        postTemplate.find(\"#edit-post-modal-link\").attr(\"data-toggle\", \"modal\");\n        postTemplate\n          .find(\"span#like-post\")\n          .attr(\"data-isLiked\", posts[i].liked);\n        if (posts[i].liked) {\n          postTemplate.find(\"span#like-post svg.heart path\").css(\"fill\", \"red\");\n        }\n        postTemplate\n          .find(\"span#like-post\")\n          .append(\"<span class='pl-3 likes'>\" + posts[i].likes + \"</span>\");\n        postTemplate\n          .find(\"#edit-post-modal-link\")\n          .attr(\"data-target\", \"#posts-edit-modal\");\n        var postUserId = posts[i].userId;\n        if (posts[i].userId !== $.cookie(\"authUserId\")) {\n          postTemplate.find(\".d-none-if-profile-view\").addClass(\"d-none\");\n        }\n        $.ajax({\n          type: \"GET\",\n          url: baseUrl + \"/api/users/\" + postUserId,\n          async: false,\n          headers: {\n            Authorization: \"Bearer \" + authToken,\n          },\n          crossDomain: true,\n          contentType: \"application/json\",\n          success: function (response) {\n            if (response) {\n              if (response.userId !== $.cookie(\"authUserId\")) {\n                postTemplate\n                  .find(\"a.link-profile\")\n                  .attr(\n                    \"href\",\n                    \"user-profile-view.html?userId=\" + response.userId\n                  );\n                postTemplate\n                  .find(\"#post-username\")\n                  .html(\n                    \"<a href='user-profile-view.html?userId=\" +\n                      response.userId +\n                      \"'>\" +\n                      response.name +\n                      \"</a>\"\n                  );\n              } else {\n                postTemplate\n                  .find(\"#post-username\")\n                  .html(\"<a href='my-profile.html'>\" + response.name + \"</a>\");\n              }\n\n              if (response.profilePicture) {\n                postTemplate\n                  .find(\"a.link-profile\")\n                  .attr(\n                    \"href\",\n                    \"user-profile-view.html?userId=\" + response.userId\n                  );\n                postTemplate\n                  .find(\"#post-user-profile-picture img\")\n                  .attr(\n                    \"src\",\n                    \"https://api.youth-initiatives.com/api/attachments/\" +\n                      response.profilePicture\n                  );\n                postTemplate\n                  .find(\"#user-icon-rounded-wrapper\")\n                  .addClass(\"d-none\");\n              } else {\n                postTemplate\n                  .find(\"#user-icon-rounded-wrapper\")\n                  .removeClass(\"d-none\");\n                postTemplate\n                  .find(\"#post-user-profile-picture\")\n                  .addClass(\"d-none\");\n              }\n              return false;\n            } else {\n              return true;\n            }\n          },\n        });\n        var postId = posts[i].id;\n        if ($.cookie(\"authUserId\") === posts[i].userId) {\n          // postTemplate.append(postsModal(i, postId));\n        }\n\n        var attachments = posts[i].attachments;\n\n        if (attachments.length > 0) {\n          for (var j = 0; j < attachments.length; j++) {\n            postTemplate.find(\"#attachments-row\").attr(\"data-toggle\", \"modal\");\n            postTemplate\n              .find(\"#attachments-row\")\n              .attr(\"data-target\", \"#posts-gallery-modal\");\n            postTemplate.find(\"#attachments-row\").attr(\"data-post-id\", postId);\n          }\n          if (attachments.length === 1) {\n            var attachmentTemplate = `<div class=\"col-12 post-pictures\"><img src=\"https://api.youth-initiatives.com/api/attachments/${attachments[0]}\"></div>`;\n            postTemplate.find(\"#attachments-row\").append(attachmentTemplate);\n          }\n          if (attachments.length === 2) {\n            for (var j = 0; j < attachments.length; j++) {\n              var attachmentTemplate = `<div class=\"col-6 post-pictures\"><img src=\"https://api.youth-initiatives.com/api/attachments/${attachments[j]}\"></div>`;\n              postTemplate.find(\"#attachments-row\").append(attachmentTemplate);\n            }\n          }\n          if (attachments.length === 3) {\n            for (var j = 0; j < attachments.length; j++) {\n              var attachmentTemplate = `<div class=\"col-4 post-pictures\"><img src=\"https://api.youth-initiatives.com/api/attachments/${attachments[j]}\"></div>`;\n              postTemplate.find(\"#attachments-row\").append(attachmentTemplate);\n            }\n          }\n          if (attachments.length > 3) {\n            for (var j = 0; j < attachments.length; j++) {\n              if (j < 3) {\n                var attachmentTemplate = `<div class=\"col-6 post-pictures\"><img src=\"https://api.youth-initiatives.com/api/attachments/${attachments[j]}\"></div>`;\n                postTemplate\n                  .find(\"#attachments-row\")\n                  .append(attachmentTemplate);\n              }\n            }\n\n            var remainingPictures = attachments.length - 3;\n\n            postTemplate\n              .find(\"#attachments-row\")\n              .append(\n                `<div class=\"col-6\"><div class=\"post-remaining-pictures\"><h4 class=\"text-white\">+${remainingPictures}</h4></div></div>`\n              );\n          }\n        } else {\n          postTemplate.find(\"#post-attachments\").hide();\n        }\n      }\n    },\n  });\n}\n\nfunction postsModal(id) {\n  var content = \"\",\n    attachments = [],\n    attachmentFiles = [],\n    filename = \"\",\n    attachmentTemplate = ``;\n  $.ajax({\n    type: \"GET\",\n    url: baseUrl + \"/api/posts/\" + id,\n    headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n    crossDomain: true,\n    async: false,\n    success: function (response) {\n      content = response.content;\n      attachments = response.attachments;\n      $(\"form#edit-post-form\").attr(\"data-post-id\", id);\n      $(\"textarea#edit-post-content-textarea\").val(content);\n      if (attachments.length) {\n        for (var j = 0; j < attachments.length; j++) {\n          $.ajax({\n            type: \"GET\",\n            url: baseUrl + \"/api/attachments/\" + attachments[j] + \"/details\",\n            headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n            crossDomain: true,\n            async: false,\n            success: function (response) {\n              filename = response.title;\n              attachmentFiles.push({\n                id: attachments[j],\n                title: filename,\n              });\n            },\n          });\n        }\n      }\n      for (var k = 0; k < attachmentFiles.length; k++) {\n        var fileNamePost = attachmentFiles[k].title;\n        if (fileNamePost.length > 20) {\n          fileNamePost = fileNamePost.substring(0, 20) + \"[...]\";\n        }\n        attachmentTemplate += `\n      <div class=\"d-flex justify-content-between align-items-center mb-3 w-75\" data-attachment-id=\"${\n        attachmentFiles[k].id\n      }\">\n        <div class=\"d-flex align-items-center\">\n            <div><i class=\"cil-file\" style=\"font-size: 30px; padding-right:10px;\"></i></div>\n            <div><a href=\"https://api.youth-initiatives.com/api/attachments/${\n              attachmentFiles[k].id\n            }\">${fileNamePost ? fileNamePost : \"filename\"}</a></div>\n        </div>\n        <div id=\"delete-attachment\" class=\"p-2\" style=\"cursor: pointer\">\n            <i class=\"cil-x text-dark\"></i>\n          </div>\n      </div>\n    `;\n      }\n      $(\"#post-attachments-profile-edit\").html(attachmentTemplate);\n    },\n  });\n}\nfunction deletePostAttachment() {\n  $(document).on(\"click\", \"#delete-attachment\", function () {\n    $(this).parent().remove();\n  });\n}\nfunction editPost(newAttachments) {\n  $(document).on(\"click\", \"button#edit-post-submit-button\", function () {\n    var form = $(\"#edit-post-form\");\n    var postId = form.attr(\"data-post-id\");\n    var content = form.find(\"textarea\").val();\n    var attachments = [];\n    var attachmentId = form\n      .find(\"#post-attachments-profile-edit\")\n      .children()\n      .each(function () {\n        attachments.push($(this).attr(\"data-attachment-id\"));\n      });\n    for (var i = 0; i < newAttachments.length; i++) {\n      attachments.push(newAttachments[i]);\n    }\n    var post = {\n      content,\n      attachments,\n    };\n    if (post.content !== \"\" || post.attachments.length > 0) {\n      $.ajax({\n        type: \"PUT\",\n        url: baseUrl + \"/api/posts/\" + postId,\n        contentType: \"application/json\",\n        headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n        data: JSON.stringify(post),\n        success: function () {\n          location.reload(true);\n        },\n      });\n    } else {\n    }\n  });\n}\nfunction uploadPicturesForPost() {\n  var attachemntIds = [];\n  var files = $(\"#files-post\")[0].files;\n\n  for (var i = 0; i < files.length; i++) {\n    let jsonArray = new FormData();\n    jsonArray.append(\"attachment\", files[i]);\n    jsonArray.append(\"title\", files[i].name);\n    console.log(jsonArray.getAll(\"attachment\"));\n\n    for (var key of jsonArray.entries()) {\n      console.log(key[0] + \", \" + key[1]);\n    }\n\n    var opts = {\n      url: baseUrl + \"/api/attachments\",\n      data: jsonArray,\n      cache: false,\n      async: false,\n      contentType: false,\n      processData: false,\n      method: \"POST\",\n      type: \"POST\",\n      // For jQuery < 1.9\n      headers: {\n        Authorization: \"Bearer \" + $.cookie(\"authToken\"),\n      },\n      success: function (data) {\n        attachemntIds.push(data.id);\n\n        var postId = data.id;\n        $.ajax({\n          type: \"GET\",\n          url: baseUrl + \"/api/attachments/\" + postId + \"/details\",\n          headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n          crossDomain: true,\n          async: false,\n          success: function (response) {\n            var filename = response.title;\n            if (filename.length > 20) {\n              filename = filename.substring(0, 20) + \"[...]\";\n            }\n            $(\"#post-attachments-profile-edit\")\n              .append(`<div class=\"d-flex justify-content-between align-items-center mb-3 w-75\" data-attachment-id=\"${postId}\">\n             <div class=\"d-flex align-items-center\">\n                 <div><i class=\"cil-file\" style=\"font-size: 30px; padding-right:10px;\"></i></div>\n                 <div>${filename ? filename : \"filename\"}</div>\n             </div>\n             <div id=\"delete-attachment\" class=\"p-2\" style=\"cursor: pointer\">\n                 <i class=\"cil-x text-dark\"></i>\n               </div>\n           </div>`);\n          },\n        });\n      },\n    };\n\n    if (jsonArray.fake) {\n      // Make sure no text encoding stuff is done by xhr\n      opts.xhr = function () {\n        var xhr = jQuery.ajaxSettings.xhr();\n        xhr.send = xhr.sendAsBinary;\n        return xhr;\n      };\n\n      opts.contentType = \"multipart/form-data; boundary=\" + jsonArray.boundary;\n      opts.data = jsonArray.toString();\n    }\n\n    let response = jQuery.ajax(opts);\n  }\n  return attachemntIds;\n}\nfunction replaceUrlWithHtmlLinks(text) {\n  var exp =\n    /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/i;\n  return text.replace(exp, \"<a href='$1'>$1</a>\");\n}\nfunction likePost() {\n  $(document).on(\"click\", \"span#like-post\", function () {\n    var userId = $.cookie(\"authUserId\");\n    var authToken = $.cookie(\"authToken\");\n    var postId = $(this).attr(\"post-id\");\n    var icon = $(this).find(\"svg.heart path\");\n    var isLiked = $(this);\n\n    var likes = parseInt($(this).find(\"span.likes\").text(), 10) + 1;\n    var likeSpan = $(this).find(\"span.likes\");\n    if (isLiked.attr(\"data-isLiked\") !== \"true\") {\n      $.ajax({\n        type: \"PUT\",\n        url: baseUrl + \"/api/posts/\" + postId + \"/like/\" + userId,\n        async: false,\n        headers: {\n          Authorization: \"Bearer \" + authToken,\n        },\n        crossDomain: true,\n        contentType: \"application/json\",\n        success: function (response) {\n          icon.css(\"fill\", \"red\");\n          likeSpan.text(likes);\n          isLiked.attr(\"data-isLiked\", \"true\");\n        },\n      });\n    } else if (isLiked.attr(\"data-isLiked\") === \"true\") {\n      $.ajax({\n        type: \"PUT\",\n        url: baseUrl + \"/api/posts/\" + postId + \"/unlike/\" + userId,\n        async: false,\n        headers: {\n          Authorization: \"Bearer \" + authToken,\n        },\n        crossDomain: true,\n        contentType: \"application/json\",\n        success: function (response) {\n          icon.parent()\n            .html(`<svg class=\"heart\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"15\" viewBox=\"0 0 16 15\">\n                                  <g id=\"heart\" fill=\"none\" stroke-miterlimit=\"10\">\n                                    <path d=\"M8,15,6.84,13.937C2.72,10.1,0,7.6,0,4.5A4.386,4.386,0,0,1,4.4,0,4.7,4.7,0,0,1,8,1.717,4.7,4.7,0,0,1,11.6,0,4.386,4.386,0,0,1,16,4.5c0,3.106-2.72,5.6-6.84,9.441Z\" stroke=\"none\"></path>\n                                    <path d=\"M 8 13.64373970031738 L 8.48186206817627 13.20225715637207 L 8.644049644470215 13.05103969573975 C 12.47146034240723 9.482660293579102 15 7.125249862670898 15 4.49590015411377 C 15 3.53331995010376 14.65030956268311 2.645900011062622 14.01533985137939 1.997089982032776 C 13.38607025146484 1.3541100025177 12.52828979492188 1 11.60000038146973 1 C 10.53046035766602 1 9.472579956054688 1.506360054016113 8.770179748535156 2.354510068893433 L 8.000020027160645 3.284480094909668 L 7.22983980178833 2.354520082473755 C 6.527400016784668 1.506360054016113 5.469510078430176 1 4.400000095367432 1 C 3.471709966659546 1 2.613929986953735 1.3541100025177 1.984660029411316 1.997089982032776 C 1.349689960479736 2.645900011062622 1 3.53331995010376 1 4.49590015411377 C 1 7.125249862670898 3.528589963912964 9.482709884643555 7.356080055236816 13.05115985870361 L 7.518139362335205 13.2022590637207 L 8 13.64373970031738 M 8 15 L 6.839849948883057 13.9370698928833 C 2.719919919967651 10.09539031982422 0 7.601950168609619 0 4.49590015411377 C 0 1.9617600440979 1.919919967651367 -8.881784197001252e-16 4.400000095367432 -8.881784197001252e-16 C 5.799960136413574 -8.881784197001252e-16 7.119880199432373 0.653980016708374 8 1.71668004989624 C 8.880080223083496 0.653980016708374 10.19995975494385 -8.881784197001252e-16 11.60000038146973 -8.881784197001252e-16 C 14.08008003234863 -8.881784197001252e-16 16 1.9617600440979 16 4.49590015411377 C 16 7.601990222930908 13.28003978729248 10.09543037414551 9.160149574279785 13.9370698928833 L 8 15 Z\" stroke=\"none\" fill=\"#3c4b64\"></path>\n                                  </g>\n                                </svg>`);\n          likeSpan.text(response.userLikes.length);\n          isLiked.attr(\"data-isLiked\", \"false\");\n        },\n      });\n    }\n  });\n}\nfunction showRecentActivity() {\n  let userToken = $.cookie(\"authToken\");\n  $.ajax({\n    type: \"GET\",\n    url: baseUrl + \"/api/notifications/\",\n    async: false,\n    headers: {\n      Authorization: \"Bearer \" + userToken,\n    },\n    crossDomain: true,\n    contentType: \"application/json\",\n    success: function (response) {\n      var activityTemplate = $(\".recent-activity-card\").find(\"li\");\n      activityTemplate.hide();\n      if (response.length > 0) {\n        for (var i = 0; i < response.length; i++) {\n          var activityItem = activityTemplate.show();\n          activityItem.clone();\n          activityItem.find(\"p#notification-topic\").html(response[i].topic);\n          var timeAgo = moment(response[i].createdAt).fromNow();\n          activityItem.find(\"p#notification-time\").html(timeAgo);\n        }\n      } else {\n        var activityItem = activityTemplate.show();\n        activityItem.clone();\n        activityItem\n          .find(\"p#notification-topic\")\n          .html(\"You don't have recent activity!\");\n        activityItem.find(\"p#notification-time\").hide();\n      }\n    },\n  });\n}\nfunction recentlyAddedProject() {\n  var userId = $.cookie(\"authUserId\");\n  var authToken = $.cookie(\"authToken\");\n  $.ajax({\n    type: \"GET\",\n    url: baseUrl + \"/api/users/\" + userId + \"/attachments\",\n    headers: { Authorization: \"Bearer \" + authToken },\n    crossDomain: true,\n    success: function (data) {\n      var files = data.content;\n      if (files.length) {\n        var sharedFile = $(\"li#shared-list-item\");\n        sharedFile.addClass(\"d-none\");\n        for (var i = 0; i < files.length; i++) {\n          var fileNameAttachments = files[i].title;\n          if (fileNameAttachments.length > 10) {\n            fileNameAttachments =\n              fileNameAttachments.substring(0, 10) + \"[...]\";\n          }\n          if (i < 5) {\n            var cloneTemplateShareFile = sharedFile.clone();\n            cloneTemplateShareFile\n              .removeClass(\"d-none\")\n              .appendTo(\"ul.shared-resources\");\n            cloneTemplateShareFile\n              .find(\"span#name-shared-files\")\n              .html(\n                \"<a href='\" +\n                  baseUrl +\n                  \"/api/attachments/\" +\n                  files[i].id +\n                  \"'>\" +\n                  fileNameAttachments +\n                  \"</a>\"\n              );\n            $(\"div#footer-recenty-projects\").addClass(\"d-block\");\n          } else {\n            break;\n          }\n        }\n        sharedFile\n          .parent()\n          .parent()\n          .parent()\n          .find(\".card-footer\")\n          .find(\"a\")\n          .attr(\"href\", \"shared-files.html\");\n      } else {\n        $(\"ul.shared-resources\")\n          .html(\"<li class='mt-3'>You don't have recently added projects!</li>\")\n          .addClass(\"list-unstyled mb-3\");\n        $(\"div#footer-recenty-projects\").addClass(\"d-none\");\n      }\n    },\n  });\n}\n\nvar loadAttachNewsFeed = function (event) {\n  var attachEditPostNewsFeed = document.getElementById(\n    \"attachEditPostNewsFeed\"\n  );\n  attachEditPostNewsFeed.src = URL.createObjectURL(event.target.files[0]);\n  attachEditPostNewsFeed.onload = function () {\n    URL.revokeObjectURL(attachEditPostNewsFeed.src); // free memory\n  };\n};\nvar createIndexPostAttach = function (event) {\n  var attachEditPostNewsFeed = document.getElementById(\"attachCreateIndexPost\");\n  attachEditPostNewsFeed.src = URL.createObjectURL(event.target.files[0]);\n  attachEditPostNewsFeed.onload = function () {\n    URL.revokeObjectURL(attachEditPostNewsFeed.src); // free memory\n  };\n};\n"],"file":"newsfeed.js"}