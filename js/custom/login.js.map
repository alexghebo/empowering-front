{"version":3,"sources":["../../../src/js/custom/login.js"],"names":["$","document","ready","on","e","preventDefault","email","val","password","ajax","type","url","baseUrl","contentType","data","JSON","stringify","success","console","log","active","removeCookie","cookie","token","userId","name","role","registeredAt","window","location","href","frontendBaseUrl","alert","error","err","responseJSON","message"],"mappings":"AAAAA,CAAC,CAACC,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAY;AAC5BF,EAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBG,EAAvB,CAA0B,QAA1B,EAAoC,UAAUC,CAAV,EAAa;AAC/CA,IAAAA,CAAC,CAACC,cAAF;AAEA,QAAIC,KAAK,GAAGN,CAAC,CAAC,QAAD,CAAD,CAAYO,GAAZ,EAAZ;AACA,QAAIC,QAAQ,GAAGR,CAAC,CAAC,WAAD,CAAD,CAAeO,GAAf,EAAf;;AAEA,QAAID,KAAK,IAAI,IAAT,IAAiBE,QAAQ,IAAI,EAAjC,EAAqC;AACnCR,MAAAA,CAAC,CAACS,IAAF,CAAO;AACLC,QAAAA,IAAI,EAAE,MADD;AAELC,QAAAA,GAAG,EAAEC,OAAO,GAAG,iBAFV;AAGLC,QAAAA,WAAW,EAAE,kBAHR;AAILC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBV,UAAAA,KAAK,EAAEA,KADY;AAEnBE,UAAAA,QAAQ,EAAEA;AAFS,SAAf,CAJD;AAQLS,QAAAA,OAAO,EAAE,UAAUH,IAAV,EAAgB;AACvBI,UAAAA,OAAO,CAACC,GAAR,CAAYL,IAAZ;;AACA,cAAIA,IAAI,CAACM,MAAL,IAAe,MAAnB,EAA2B;AACzB;AACApB,YAAAA,CAAC,CAACqB,YAAF,CAAe,WAAf;AACArB,YAAAA,CAAC,CAACqB,YAAF,CAAe,WAAf;AACArB,YAAAA,CAAC,CAACqB,YAAF,CAAe,YAAf;AACArB,YAAAA,CAAC,CAACqB,YAAF,CAAe,UAAf;AACArB,YAAAA,CAAC,CAACqB,YAAF,CAAe,YAAf;AACArB,YAAAA,CAAC,CAACqB,YAAF,CAAe,cAAf;AACArB,YAAAA,CAAC,CAACsB,MAAF,CAAS,WAAT,EAAsBR,IAAI,CAACS,KAA3B;AACAvB,YAAAA,CAAC,CAACsB,MAAF,CAAS,WAAT,EAAsBhB,KAAtB;AACAN,YAAAA,CAAC,CAACsB,MAAF,CAAS,YAAT,EAAuBR,IAAI,CAACU,MAA5B;AACAxB,YAAAA,CAAC,CAACsB,MAAF,CAAS,UAAT,EAAqBR,IAAI,CAACW,IAA1B;AACAzB,YAAAA,CAAC,CAACsB,MAAF,CAAS,UAAT,EAAqBR,IAAI,CAACY,IAA1B;AACA1B,YAAAA,CAAC,CAACsB,MAAF,CAAS,cAAT,EAAyBR,IAAI,CAACa,YAA9B;AACAC,YAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBC,eAAe,GAAG,aAAzC;AACA,mBAAO,IAAP;AACD,WAhBD,MAgBO;AACLb,YAAAA,OAAO,CAACC,GAAR,CAAYL,IAAZ;AACAI,YAAAA,OAAO,CAACC,GAAR,CAAYL,IAAI,CAACM,MAAjB;AACAY,YAAAA,KAAK,CAAC,sDAAD,CAAL;AACD;AACF,SA/BI;AAgCLC,QAAAA,KAAK,EAAE,UAAUC,GAAV,EAAe;AACpBF,UAAAA,KAAK,CAACE,GAAG,CAACC,YAAJ,CAAiBC,OAAlB,CAAL;AACD;AAlCI,OAAP;AAoCD;AACF,GA5CD;AA6CD,CA9CD","sourcesContent":["$(document).ready(function () {\n  $(\"form#submit-login\").on(\"submit\", function (e) {\n    e.preventDefault();\n\n    let email = $(\"#email\").val();\n    let password = $(\"#password\").val();\n\n    if (email != null && password != \"\") {\n      $.ajax({\n        type: \"post\",\n        url: baseUrl + \"/api/auth/login\",\n        contentType: \"application/json\",\n        data: JSON.stringify({\n          email: email,\n          password: password,\n        }),\n        success: function (data) {\n          console.log(data);\n          if (data.active == \"true\") {\n            //get user auth token\n            $.removeCookie(\"authToken\");\n            $.removeCookie(\"authEmail\");\n            $.removeCookie(\"authUserId\");\n            $.removeCookie(\"authName\");\n            $.removeCookie(\"authMobile\");\n            $.removeCookie(\"registeredAt\");\n            $.cookie(\"authToken\", data.token);\n            $.cookie(\"authEmail\", email);\n            $.cookie(\"authUserId\", data.userId);\n            $.cookie(\"authName\", data.name);\n            $.cookie(\"authRole\", data.role);\n            $.cookie(\"registeredAt\", data.registeredAt);\n            window.location.href = frontendBaseUrl + \"/index.html\";\n            return true;\n          } else {\n            console.log(data);\n            console.log(data.active);\n            alert(\"Your account has not been validated! Check the mail.\");\n          }\n        },\n        error: function (err) {\n          alert(err.responseJSON.message);\n        },\n      });\n    }\n  });\n});\n"],"file":"login.js"}