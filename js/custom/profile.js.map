{"version":3,"sources":["../../../src/js/custom/profile.js"],"names":["$","document","ready","userId","cookie","authToken","showSharedFiles","sortAddMember","bind","attr","is","on","e","preventDefault","find","each","memberId","ajax","type","url","baseUrl","headers","Authorization","crossDomain","success","data","email","contentType","console","log","location","reload","files","name","length","substring","text","removeClass","likePost","submit","event","jsonArray","FormData","append","getAll","key","entries","opts","cache","processData","method","fake","xhr","jQuery","ajaxSettings","send","sendAsBinary","boundary","toString","html","userType","hide","membersTemplate","members","j","response","member","clone","show","appendTo","locationCity","locationCountry","showEmail","profilePicture","addClass","imgWidth","width","imgHeight","height","css","resources","userResourceTemplate","quantity","connections","connectionTemplate","connectionAddMemberTemplate","k","profilePictureAddMember","i","domains","userDomainBadge","description","postHTML","postTemplate","createdAt","replaceUrlWithHtmlLinks","content","id","liked","likes","postId","attachments","attachmentTemplate","remainingPictures","async","images","closest","postsModal","click","alert","uploadProfilePicture","deletePostAttachment","attachmentIds","uploads","uploadPicturesForPost","editPost","selected","push","filtered","filter","el","undefined","val","country","city","JSON","stringify","removeCookie","complete","attachmentFiles","filename","title","fileNamePost","parent","remove","newAttachments","form","attachmentId","children","post","exp","replace","attachemntIds","icon","isLiked","parseInt","likeSpan","userLikes","sharedFile","fileNameAttachments","cloneTemplateShareFile","editProfileInfo","existingDomains","beforeSend","setRequestHeader","allDomains","domainHtml","domainTemplate","error","attachEditPostProfile","editPostProfile","getElementById","src","URL","createObjectURL","target","output","onload","revokeObjectURL","value","toLowerCase","toggle","indexOf","editProfilePicture","attachEditProfilePicture","createProfilePostAttach","attachCreatePost"],"mappings":"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","sourcesContent":["$(document).ready(function () {\n  let userId = $.cookie(\"authUserId\");\n  let authToken = $.cookie(\"authToken\");\n  showSharedFiles(userId, authToken);\n  sortAddMember();\n  $(\"input#email-checkbox\").bind(\"click\", function () {\n    $(this).attr(\"checked\", $(this).is(\":checked\"));\n  });\n  $(document).on(\"submit\", \"form#form-add-members\", function (e) {\n    e.preventDefault();\n\n    $(this)\n      .find(\"input[type=checkbox]\")\n      .each(function () {\n        if ($(this).is(\":checked\")) {\n          var memberId = $(this).attr(\"data-userid\");\n          $.ajax({\n            type: \"GET\",\n            url: baseUrl + \"/api/users/\" + memberId,\n            headers: { Authorization: \"Bearer \" + authToken },\n            crossDomain: true,\n            success: function (data) {\n              $.ajax({\n                type: \"POST\",\n                url:\n                  baseUrl +\n                  \"/api/users/\" +\n                  memberId +\n                  \"/sendInvitationsEmails/\" +\n                  data.email,\n                contentType: \"application/json\",\n                success: function () {\n                  console.log(\"email sent to \" + data.email);\n                },\n              });\n            },\n          });\n        }\n      });\n    location.reload(true);\n  });\n\n  $(\"#inputGroupFile01\").on(\"change\", function () {\n    var files = $(\"#inputGroupFile01\")[0].files[0].name;\n    if (files.length > 20) {\n      files = files.substring(0, 20) + \"[...]\";\n    }\n    $(\"span#file-name\").text(files);\n    if ($(\"#inputGroupFile01\")[0].files.length) {\n      $(\".file-name-attachment .file-icon\").removeClass(\"d-none\");\n    }\n  });\n\n  $(\"#edit-profile-picture-input\").on(\"change\", function () {\n    var files = $(\"#edit-profile-picture-input\")[0].files[0].name;\n    if (files.length > 20) {\n      files = files.substring(0, 20) + \"[...]\";\n    }\n    $(\"span#file-name-profile-picture-edit\").text(files);\n  });\n  likePost();\n\n  $(\"#fileUploadForm\").submit(function (event) {\n    //stop submit the form, we will post it manually.\n    event.preventDefault();\n\n    const jsonArray = new FormData();\n    jsonArray.append(\"attachment\", $(\"#inputGroupFile01\")[0].files[0]);\n    jsonArray.append(\"title\", $(\"#inputGroupFile01\")[0].files[0].name);\n    console.log(jsonArray.getAll(\"attachment\"));\n    for (var key of jsonArray.entries()) {\n      console.log(key[0] + \", \" + key[1]);\n    }\n\n    var opts = {\n      url: baseUrl + \"/api/attachments\",\n      data: jsonArray,\n      cache: false,\n      contentType: false,\n      processData: false,\n      method: \"POST\",\n      type: \"POST\", // For jQuery < 1.9\n      headers: { Authorization: \"Bearer \" + authToken },\n      success: function (data) {\n        location.reload(true);\n      },\n    };\n    if (jsonArray.fake) {\n      // Make sure no text encoding stuff is done by xhr\n      opts.xhr = function () {\n        var xhr = jQuery.ajaxSettings.xhr();\n        xhr.send = xhr.sendAsBinary;\n        return xhr;\n      };\n      opts.contentType = \"multipart/form-data; boundary=\" + jsonArray.boundary;\n      opts.data = jsonArray.toString();\n    }\n    jQuery.ajax(opts);\n  });\n  $.ajax({\n    type: \"GET\",\n    url: baseUrl + \"/api/users/\" + userId,\n    headers: { Authorization: \"Bearer \" + authToken },\n    crossDomain: true,\n    success: function (data) {\n      // display user name\n      $(\".user-name\").html(data.name);\n      $(\"h6#post-username\").html(data.name);\n      // display user type\n      let userType = data.userType;\n      if (userType === \"SINGLE_USER\") {\n        $(\".user-type\").html(\"Single user\");\n      } else if (userType === \"INFORMAL_GROUP\") {\n        $(\".user-type\").html(\"Informal group\");\n      } else if (userType === \"NGO\") {\n        $(\".user-type\").html(\"NGO\");\n      } else if (userType === \"PUBLIC_INSTITUTION\") {\n        $(\".user-type\").html(\"Public institution\");\n      } else {\n        $(\".user-type\").html(\"USER TYPE NOT SET\");\n      }\n\n      if (data.userType !== \"INFORMAL_GROUP\") {\n        $(\".members-card-for-groups\").hide();\n      } else {\n        var membersTemplate = $(\".members-card-for-groups\").find(\n          \"#member-group\"\n        );\n        membersTemplate.hide();\n        if (data.members.length) {\n          for (var j = 0; j < data.members.length; j++) {\n            $.ajax({\n              type: \"GET\",\n              url: baseUrl + \"/api/users/\" + data.members[j],\n              headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n              crossDomain: true,\n              success: function (response) {\n                var userId = $.cookie(\"authUserId\");\n\n                var member = membersTemplate.clone();\n                if (userId === response.userId) {\n                  $(\"li#member-group\").hide();\n                } else {\n                  member.show().appendTo(\"#user-member-group\");\n                  member\n                    .find(\"a#link-members\")\n                    .attr(\n                      \"href\",\n                      `user-profile-view.html?userId=${response.userId}`\n                    );\n                  member\n                    .find(\"span#user-member-name-group\")\n                    .html(response.name);\n                }\n              },\n            });\n          }\n        } else {\n          membersTemplate\n            .show()\n            .html(\n              \"<div class='col-12'>This group does not have any members yet!</div>\"\n            );\n        }\n      }\n      // display user location\n      $(\".user-location\").html(data.locationCity + \", \" + data.locationCountry);\n\n      $(\"input#email-checkbox\").attr(\"checked\", data.showEmail);\n\n      // display user-email\n      if (data.showEmail) {\n        $(\".user-email\").html(data.email);\n      } else {\n        $(\".user-email\").hide();\n      }\n\n      // get user profile picture\n      if (data.profilePicture) {\n        $(\"img.profile-picture\").attr(\n          \"src\",\n          \"https://api.youth-initiatives.com/api/attachments/\" +\n            data.profilePicture\n        );\n        $(\".profile-picture-post img\").attr(\n          \"src\",\n          \"https://api.youth-initiatives.com/api/attachments/\" +\n            data.profilePicture\n        );\n        $(\".d-none-if-picture-not-exists\").addClass(\"d-none\");\n        var imgWidth = $(\"img.profile-picture\").width();\n        var imgHeight = $(\"img.profile-picture\").height();\n\n        if (imgWidth > imgHeight) {\n          $(\"img.profile-picture\").css(\"width\", \"100%\");\n        } else {\n          $(\"img.profile-picture\").css(\"height\", \"100%\");\n        }\n      } else {\n        $(\".profile-placeholder\").removeClass(\"d-none\");\n        $(\".profile-pic\").addClass(\"d-none\");\n        $(\".profile-picture-post\").addClass(\"d-none\");\n        $(\".d-none-if-picture-not-exists\").removeClass(\"d-none\");\n      }\n      // display resources\n      for (var j = 0; j < data.resources.length; j++) {\n        let userResourceTemplate = `\n        <div class=\"d-flex flex-row justify-content-between\">\n          <p>${data.resources[j].name}</p>\n          <p>${data.resources[j].quantity}</p>\n        </div>`;\n        $(\".user-resources-profile\").append(userResourceTemplate);\n      }\n      //display connections\n      if (data.connections.length > 0) {\n        var connectionTemplate = ``;\n        var connectionAddMemberTemplate = ``;\n        for (var k = 0; k < data.connections.length; k++) {\n          var memberId = data.connections[k].userId;\n          $.ajax({\n            type: \"GET\",\n            url: baseUrl + \"/api/users/\" + memberId,\n            headers: { Authorization: \"Bearer \" + authToken },\n            crossDomain: true,\n            success: function (response) {\n              var profilePictureAddMember = ``;\n              if (response.userType === \"SINGLE_USER\") {\n                if (response.profilePicture) {\n                  profilePictureAddMember = `\n                  <div class=\"icon-user-circle\" style=\"opacity: 1 !important;\">\n                    <img class=\"profile-picture-add-member\" src=\"https://api.youth-initiatives.com/api/attachments/${response.profilePicture}\">\n                  </div>\n                `;\n                } else {\n                  profilePictureAddMember = ` <div class=\"icon-user-circle\">\n                    <img src=\"assets/img/icons/user-avatar-orange.svg\" alt=\"Profile Picture\" title=\"Profile Picture\" />\n                  </div>`;\n                }\n                connectionAddMemberTemplate = `\n                <div class=\"align-items-center mb-3 no-gutters d-flex\">\n                  <div>\n                      <input class=\"w-auto\" type=\"checkbox\" id=\"addMemberToGroup\" data-userid=\"${response.userId}\"/>\n                  </div>\n                  <div class=\"col-auto pl-3\">\n                    <div class=\"icon-wrapper\">\n                      <div class=\"icon-user-circle\">\n                        ${profilePictureAddMember}\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"col-auto\">\n                    <div class=\"add-user-name-wrapper px-1 px-lg-3\">\n                      <span class=\"user-name-members\" id=\"add-member-name\">${response.name}</span>\n                    </div>\n                  </div>\n                </div>`;\n                $(\".users-add-list\").append(connectionAddMemberTemplate);\n              }\n            },\n          });\n          var profilePicture = ``;\n          if (data.connections[k].profilePicture) {\n            profilePicture = `\n            <div class=\"icon-user-circle\" style=\"opacity: 1 !important;\">\n              <a class=\"h-100 w-100 d-flex align-items-center justify-content-center\" href=\"user-profile-view.html?userId=${data.connections[k].userId}\">\n                <img class=\"profile-picture-connections\" src=\"https://api.youth-initiatives.com/api/attachments/${data.connections[k].profilePicture}\">\n              </a>\n            </div>\n            `;\n          } else {\n            profilePicture = `\n          <div class=\"icon-user-circle\">\n            <a class=\"w-100 h-100 d-flex align-items-center justify-content-center\" href=\"user-profile-view.html?userId=${data.connections[k].userId}\">\n              <img src=\"assets/img/icons/user-avatar-orange.svg\" alt=\"Profile Picture\" title=\"Profile Picture\" />\n            </a>\n          </div>\n            `;\n          }\n          connectionTemplate = `\n          <div class=\"row py-2 no-gutters align-items-center justify-content-between\">\n            <div class=\"col-auto px-3\">\n              <div class=\"icon-wrapper\">\n                ${profilePicture}\n              </div>\n            </div>\n            <div class=\"col\">\n              <a class=\"text-muted text-decoration-none\" href=\"user-profile-view.html?userId=${data.connections[k].userId}\">\n                <span class=\"pl-3\" id=\"user-member-name\">${data.connections[k].name}\n                </span>\n              </a>\n            </div>\n          </div>\n          `;\n\n          $(\".connections-template-profile\").append(connectionTemplate);\n\n          $(\".connections-profile-see-more\")\n            .find(\"a\")\n            .attr(\"href\", \"connections.html\");\n        }\n      } else {\n        $(\".connections-template-profile\").html(\n          \"<p class='p-3 m-0'>You don't have any connections yet</p>\"\n        );\n      }\n\n      $(\".users-add-list\")\n        .find(\"input#addMemberToGroup\")\n        .bind(\"click\", function () {\n          $(this).attr(\"checked\", $(this).is(\":checked\"));\n        });\n\n      // display domains\n      for (var i = 0; i < data.domains.length; i++) {\n        var userDomainBadge = `<span class=\"badge badge-pill badge-secondary ml-2\">${data.domains[i].name}</span>`;\n        $(\".user-domains\").append(userDomainBadge);\n      }\n\n      // user description\n      if (data.description) {\n        $(\".description\").html(data.description);\n      } else {\n        $(\".description\").html(\"You don't have a description yet!\");\n      }\n    },\n  });\n\n  $.ajax({\n    type: \"get\",\n    url: baseUrl + \"/api/posts/user/\" + userId,\n    contentType: \"application/json\",\n    headers: {\n      Authorization: \"Bearer \" + authToken,\n    },\n    crossDomain: true,\n    success: function (data) {\n      var postHTML = $(\"#profile-post\");\n      postHTML.hide();\n      if (data.length > 0) {\n        for (var i = 0; i < data.length; i++) {\n          var postTemplate = postHTML.clone();\n          postTemplate.show().appendTo(\".posts-wrapper\");\n\n          postTemplate.find(\"#post-date\").html(data[i].createdAt);\n          postTemplate\n            .find(\"p#post-content\")\n            .html(replaceUrlWithHtmlLinks(data[i].content));\n          postTemplate\n            .find(\"#edit-post-modal-link\")\n            .attr(\"data-toggle\", \"modal\");\n          postTemplate\n            .find(\"#edit-post-modal-link\")\n            .attr(\"data-target\", \"#posts-edit-modal\");\n          postTemplate.find(\"span#like-post\").attr(\"post-id\", data[i].id);\n          postTemplate\n            .find(\"span#like-post\")\n            .attr(\"data-isLiked\", data[i].liked);\n          if (data[i].liked) {\n            postTemplate\n              .find(\"span#like-post svg.heart path\")\n              .css(\"fill\", \"red\");\n          }\n          postTemplate\n            .find(\"span#like-post\")\n            .append(\"<span class='pl-3 likes'>\" + data[i].likes + \"</span>\");\n          var postId = data[i].id;\n          postTemplate.attr(\"data-post-id\", postId);\n\n          var attachments = data[i].attachments;\n\n          if (attachments.length > 0) {\n            for (var j = 0; j < attachments.length; j++) {\n              postTemplate\n                .find(\"#attachments-row\")\n                .attr(\"data-toggle\", \"modal\");\n              postTemplate\n                .find(\"#attachments-row\")\n                .attr(\"data-target\", \"#posts-gallery-modal\");\n              postTemplate\n                .find(\"#attachments-row\")\n                .attr(\"data-post-id\", postId);\n            }\n            if (attachments.length === 1) {\n              var attachmentTemplate = `<div class=\"col-12 post-pictures\"><img src=\"https://api.youth-initiatives.com/api/attachments/${attachments[0]}\"></div>`;\n              postTemplate.find(\"#attachments-row\").append(attachmentTemplate);\n            }\n            if (attachments.length === 2) {\n              for (var j = 0; j < attachments.length; j++) {\n                var attachmentTemplate = `<div class=\"col-6 post-pictures\"><img src=\"https://api.youth-initiatives.com/api/attachments/${attachments[j]}\"></div>`;\n                postTemplate\n                  .find(\"#attachments-row\")\n                  .append(attachmentTemplate);\n              }\n            }\n            if (attachments.length === 3) {\n              for (var j = 0; j < attachments.length; j++) {\n                var attachmentTemplate = `<div class=\"col-4 post-pictures\"><img src=\"https://api.youth-initiatives.com/api/attachments/${attachments[j]}\"></div>`;\n                postTemplate\n                  .find(\"#attachments-row\")\n                  .append(attachmentTemplate);\n              }\n            }\n            if (attachments.length > 3) {\n              for (var j = 0; j < attachments.length; j++) {\n                if (j < 3) {\n                  var attachmentTemplate = `<div class=\"col-6 post-pictures\"><img src=\"https://api.youth-initiatives.com/api/attachments/${attachments[j]}\"></div>`;\n                  postTemplate\n                    .find(\"#attachments-row\")\n                    .append(attachmentTemplate);\n                }\n              }\n\n              var remainingPictures = attachments.length - 3;\n\n              postTemplate\n                .find(\"#attachments-row\")\n                .append(\n                  `<div class=\"col-6\"><div class=\"post-remaining-pictures\"><h4 class=\"text-white\">+${remainingPictures}</h4></div></div>`\n                );\n            }\n          } else {\n            postTemplate.find(\"#post-attachments\").hide();\n          }\n        }\n      } else {\n        $(\".posts-wrapper\").html(\n          \"<h4 class='text-center mt-5'>This user has no posts!</h4>\"\n        );\n      }\n    },\n  });\n  $(document).on(\"click\", \"#attachments-row\", function () {\n    var postId = $(this).attr(\"data-post-id\");\n\n    $.ajax({\n      type: \"GET\",\n      url: baseUrl + \"/api/posts/\" + postId,\n      headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n      crossDomain: true,\n      async: false,\n      success: function (response) {\n        var attachments = response.attachments;\n        var images = ``;\n        if (attachments.length > 0) {\n          for (var i = 0; i < attachments.length; i++) {\n            images += `<img class=\"img-fluid mb-3 box-shadow\" src=\"https://api.youth-initiatives.com/api/attachments/${attachments[i]}\">`;\n          }\n          $(\"#modal-gallery-images\").html(images);\n        }\n      },\n    });\n  });\n  $(document).on(\"click\", \"a#edit-post-modal-link\", function () {\n    var postId = $(this).closest(\"#profile-post\").attr(\"data-post-id\");\n    postsModal(postId);\n  });\n  $(\"input#domain-checkbox\").click(function () {\n    alert(\"click\");\n  });\n  uploadProfilePicture(userId, authToken);\n  deletePostAttachment();\n\n  var attachmentIds = [];\n  $(document).on(\"change\", \"input#files-post\", function () {\n    var uploads = $(\"#files-post\")[0].files;\n    attachmentIds = uploadPicturesForPost();\n  });\n  editPost(attachmentIds);\n});\n\nasync function uploadProfilePicture(userId, authToken) {\n  $(\"#edit-user-info\").submit(function (event) {\n    //stop submit the form, we will post it manually.\n    event.preventDefault();\n\n    const jsonArray = new FormData();\n    if ($(\"input#edit-profile-picture-input\")[0].files.length) {\n      jsonArray.append(\n        \"attachment\",\n        $(\"#edit-profile-picture-input\")[0].files[0]\n      );\n      jsonArray.append(\n        \"title\",\n        $(\"#edit-profile-picture-input\")[0].files[0].name\n      );\n      for (var key of jsonArray.entries()) {\n        console.log(key[0] + \", \" + key[1]);\n      }\n\n      var opts = {\n        url: baseUrl + \"/api/attachments\",\n        data: jsonArray,\n        cache: false,\n        contentType: false,\n        processData: false,\n        method: \"POST\",\n        async: false,\n        type: \"POST\", // For jQuery < 1.9\n        headers: { Authorization: \"Bearer \" + authToken },\n        success: function (data) {\n          var id = data.id;\n\n          $.ajax({\n            type: \"POST\",\n            url:\n              baseUrl +\n              \"/api/users/\" +\n              $.cookie(\"authUserId\") +\n              \"/profilePicture\",\n            contentType: \"text/plain\",\n            async: false,\n            headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n            data: id,\n            success: function () {\n              location.reload(true);\n              $(\"img.profile-picture\").attr(\n                \"src\",\n                \"https://api.youth-initiatives.com/api/attachments/\" + this.data\n              );\n              $(\".profile-picture-post img\").attr(\n                \"src\",\n                \"https://api.youth-initiatives.com/api/attachments/\" + this.data\n              );\n            },\n          });\n        },\n      };\n      if (jsonArray.fake) {\n        // Make sure no text encoding stuff is done by xhr\n        opts.xhr = function () {\n          var xhr = jQuery.ajaxSettings.xhr();\n          xhr.send = xhr.sendAsBinary;\n          return xhr;\n        };\n        opts.contentType =\n          \"multipart/form-data; boundary=\" + jsonArray.boundary;\n        opts.data = jsonArray.toString();\n      }\n    }\n    var selected = [];\n    $(\".domains-list #check-domain\").each(function () {\n      selected.push($(this).find(\"input:checked\").attr(\"data-domain-id\"));\n    });\n    var filtered = selected.filter(function (el) {\n      return el != undefined;\n    });\n\n    if (filtered.length < 3) {\n      alert(\"You must select at leat 3 domains\");\n    } else {\n      var name = $(\"input#edit-details-name\").val();\n      var country = $(\"input#edit-details-country\").val();\n      var city = $(\"input#edit-details-city\").val();\n      var showEmail = $(\"input#email-checkbox\").is(\":checked\");\n\n      if (name && country && city) {\n        $.ajax({\n          type: \"PUT\",\n          url: baseUrl + \"/api/users/\" + userId + \"/userInfo\",\n          headers: { Authorization: \"Bearer \" + authToken },\n          crossDomain: true,\n          async: false,\n          data: JSON.stringify({\n            name: name,\n            locationCountry: country,\n            locationCity: city,\n            domains: filtered,\n            showEmail: showEmail,\n          }),\n          contentType: \"application/json\",\n          success: function (data) {\n            $.removeCookie(\"authName\");\n            $.cookie(\"authName\", name);\n            if ($(\"input#edit-profile-picture-input\")[0].files.length > 0) {\n              jQuery.ajax(opts);\n            } else {\n              location.reload(true);\n            }\n          },\n          complete: function () {},\n        });\n      } else {\n        alert(\"You must complete all fields!\");\n      }\n    }\n  });\n}\n\nfunction postsModal(id) {\n  var content = \"\",\n    attachments = [],\n    attachmentFiles = [],\n    filename = \"\",\n    attachmentTemplate = ``;\n  $.ajax({\n    type: \"GET\",\n    url: baseUrl + \"/api/posts/\" + id,\n    headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n    crossDomain: true,\n    async: false,\n    success: function (response) {\n      content = response.content;\n      attachments = response.attachments;\n      $(\"form#edit-post-form\").attr(\"data-post-id\", id);\n      $(\"textarea#edit-post-content-textarea\").val(content);\n      if (attachments.length) {\n        for (var j = 0; j < attachments.length; j++) {\n          $.ajax({\n            type: \"GET\",\n            url: baseUrl + \"/api/attachments/\" + attachments[j] + \"/details\",\n            headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n            crossDomain: true,\n            async: false,\n            success: function (response) {\n              filename = response.title;\n              attachmentFiles.push({\n                id: attachments[j],\n                title: filename,\n              });\n            },\n          });\n        }\n      }\n      for (var k = 0; k < attachmentFiles.length; k++) {\n        var fileNamePost = attachmentFiles[k].title;\n        if (fileNamePost.length > 20) {\n          fileNamePost = fileNamePost.substring(0, 20) + \"[...]\";\n        }\n        attachmentTemplate += `\n      <div class=\"d-flex justify-content-between align-items-center mb-3 w-75\" data-attachment-id=\"${\n        attachmentFiles[k].id\n      }\">\n        <div class=\"d-flex align-items-center\">\n            <div><i class=\"cil-file\" style=\"font-size: 30px; padding-right:10px;\"></i></div>\n            <div><a href=\"https://api.youth-initiatives.com/api/attachments/${\n              attachmentFiles[k].id\n            }\">${fileNamePost ? fileNamePost : \"filename\"}</a></div>\n        </div>\n        <div id=\"delete-attachment\" class=\"p-2\" style=\"cursor: pointer\">\n            <i class=\"cil-x text-dark\"></i>\n          </div>\n      </div>\n    `;\n      }\n      $(\"#post-attachments-profile-edit\").html(attachmentTemplate);\n    },\n  });\n}\n\nfunction deletePostAttachment() {\n  $(document).on(\"click\", \"#delete-attachment\", function () {\n    $(this).parent().remove();\n    alert(\"attachment deleted\");\n  });\n}\n\nfunction editPost(newAttachments) {\n  $(document).on(\"click\", \"button#edit-post-submit-button\", function () {\n    var form = $(\"#edit-post-form\");\n    var postId = form.attr(\"data-post-id\");\n\n    var content = form.find(\"textarea\").val();\n    var attachments = [];\n    var attachmentId = form\n      .find(\"#post-attachments-profile-edit\")\n      .children()\n      .each(function () {\n        attachments.push($(this).attr(\"data-attachment-id\"));\n      });\n    for (var i = 0; i < newAttachments.length; i++) {\n      attachments.push(newAttachments[i]);\n    }\n    var post = {\n      content,\n      attachments,\n    };\n    if (post.content !== \"\" || post.attachments.length > 0) {\n      $.ajax({\n        type: \"PUT\",\n        url: baseUrl + \"/api/posts/\" + postId,\n        contentType: \"application/json\",\n        headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n        data: JSON.stringify(post),\n        success: function () {\n          location.reload(true);\n        },\n      });\n    } else {\n      alert(\"content missing!\");\n    }\n  });\n}\n\nfunction replaceUrlWithHtmlLinks(text) {\n  var exp =\n    /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/i;\n  return text.replace(exp, \"<a href='$1'>$1</a>\");\n}\n\nfunction uploadPicturesForPost() {\n  var attachemntIds = [];\n  var files = $(\"#files-post\")[0].files;\n\n  for (var i = 0; i < files.length; i++) {\n    let jsonArray = new FormData();\n    jsonArray.append(\"attachment\", files[i]);\n    jsonArray.append(\"title\", files[i].name);\n    console.log(jsonArray.getAll(\"attachment\"));\n\n    for (var key of jsonArray.entries()) {\n      console.log(key[0] + \", \" + key[1]);\n    }\n\n    var opts = {\n      url: baseUrl + \"/api/attachments\",\n      data: jsonArray,\n      cache: false,\n      async: false,\n      contentType: false,\n      processData: false,\n      method: \"POST\",\n      type: \"POST\",\n      // For jQuery < 1.9\n      headers: {\n        Authorization: \"Bearer \" + $.cookie(\"authToken\"),\n      },\n      success: function (data) {\n        attachemntIds.push(data.id);\n        var postId = data.id;\n        $.ajax({\n          type: \"GET\",\n          url: baseUrl + \"/api/attachments/\" + postId + \"/details\",\n          headers: { Authorization: \"Bearer \" + $.cookie(\"authToken\") },\n          crossDomain: true,\n          async: false,\n          success: function (response) {\n            var filename = response.title;\n            if (filename.length > 20) {\n              filename = filename.substring(0, 20) + \"[...]\";\n            }\n            $(\"#post-attachments-profile-edit\").append(`\n              <div class=\"d-flex justify-content-between align-items-center mb-3 w-75\" data-attachment-id=\"${postId}\">\n                <div class=\"d-flex align-items-center\">\n                  <div><i class=\"cil-file\" style=\"font-size: 30px; padding-right:10px;\"></i></div>\n                  <div>${filename ? filename : \"filename\"}</div>\n                </div>\n                <div id=\"delete-attachment\" class=\"p-2\" style=\"cursor: pointer\">\n                  <i class=\"cil-x text-dark\"></i>\n                </div>\n            </div>\n            `);\n          },\n        });\n      },\n    };\n\n    if (jsonArray.fake) {\n      opts.xhr = function () {\n        var xhr = jQuery.ajaxSettings.xhr();\n        xhr.send = xhr.sendAsBinary;\n        return xhr;\n      };\n      opts.contentType = \"multipart/form-data; boundary=\" + jsonArray.boundary;\n      opts.data = jsonArray.toString();\n    }\n    let response = jQuery.ajax(opts);\n  }\n  return attachemntIds;\n}\nfunction likePost() {\n  $(document).on(\"click\", \"span#like-post\", function () {\n    var userId = $.cookie(\"authUserId\");\n    var authToken = $.cookie(\"authToken\");\n    var postId = $(this).attr(\"post-id\");\n    var icon = $(this).find(\"svg.heart path\");\n    var isLiked = $(this);\n\n    var likes = parseInt($(this).find(\"span.likes\").text(), 10) + 1;\n    var likeSpan = $(this).find(\"span.likes\");\n    if (isLiked.attr(\"data-isLiked\") !== \"true\") {\n      $.ajax({\n        type: \"PUT\",\n        url: baseUrl + \"/api/posts/\" + postId + \"/like/\" + userId,\n        async: false,\n        headers: {\n          Authorization: \"Bearer \" + authToken,\n        },\n        crossDomain: true,\n        contentType: \"application/json\",\n        success: function (response) {\n          icon.css(\"fill\", \"red\");\n          likeSpan.text(likes);\n          isLiked.attr(\"data-isLiked\", \"true\");\n        },\n      });\n    } else if (isLiked.attr(\"data-isLiked\") === \"true\") {\n      $.ajax({\n        type: \"PUT\",\n        url: baseUrl + \"/api/posts/\" + postId + \"/unlike/\" + userId,\n        async: false,\n        headers: {\n          Authorization: \"Bearer \" + authToken,\n        },\n        crossDomain: true,\n        contentType: \"application/json\",\n        success: function (response) {\n          icon.parent()\n            .html(`<svg class=\"heart\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"15\" viewBox=\"0 0 16 15\">\n                                  <g id=\"heart\" fill=\"none\" stroke-miterlimit=\"10\">\n                                    <path d=\"M8,15,6.84,13.937C2.72,10.1,0,7.6,0,4.5A4.386,4.386,0,0,1,4.4,0,4.7,4.7,0,0,1,8,1.717,4.7,4.7,0,0,1,11.6,0,4.386,4.386,0,0,1,16,4.5c0,3.106-2.72,5.6-6.84,9.441Z\" stroke=\"none\"></path>\n                                    <path d=\"M 8 13.64373970031738 L 8.48186206817627 13.20225715637207 L 8.644049644470215 13.05103969573975 C 12.47146034240723 9.482660293579102 15 7.125249862670898 15 4.49590015411377 C 15 3.53331995010376 14.65030956268311 2.645900011062622 14.01533985137939 1.997089982032776 C 13.38607025146484 1.3541100025177 12.52828979492188 1 11.60000038146973 1 C 10.53046035766602 1 9.472579956054688 1.506360054016113 8.770179748535156 2.354510068893433 L 8.000020027160645 3.284480094909668 L 7.22983980178833 2.354520082473755 C 6.527400016784668 1.506360054016113 5.469510078430176 1 4.400000095367432 1 C 3.471709966659546 1 2.613929986953735 1.3541100025177 1.984660029411316 1.997089982032776 C 1.349689960479736 2.645900011062622 1 3.53331995010376 1 4.49590015411377 C 1 7.125249862670898 3.528589963912964 9.482709884643555 7.356080055236816 13.05115985870361 L 7.518139362335205 13.2022590637207 L 8 13.64373970031738 M 8 15 L 6.839849948883057 13.9370698928833 C 2.719919919967651 10.09539031982422 0 7.601950168609619 0 4.49590015411377 C 0 1.9617600440979 1.919919967651367 -8.881784197001252e-16 4.400000095367432 -8.881784197001252e-16 C 5.799960136413574 -8.881784197001252e-16 7.119880199432373 0.653980016708374 8 1.71668004989624 C 8.880080223083496 0.653980016708374 10.19995975494385 -8.881784197001252e-16 11.60000038146973 -8.881784197001252e-16 C 14.08008003234863 -8.881784197001252e-16 16 1.9617600440979 16 4.49590015411377 C 16 7.601990222930908 13.28003978729248 10.09543037414551 9.160149574279785 13.9370698928833 L 8 15 Z\" stroke=\"none\" fill=\"#3c4b64\"></path>\n                                  </g>\n                                </svg>`);\n          likeSpan.text(response.userLikes.length);\n          isLiked.attr(\"data-isLiked\", \"false\");\n        },\n      });\n    }\n  });\n}\nfunction showSharedFiles(userId, authToken) {\n  $.ajax({\n    type: \"GET\",\n    url: baseUrl + \"/api/users/\" + userId + \"/attachments\",\n    headers: { Authorization: \"Bearer \" + authToken },\n    crossDomain: true,\n    success: function (data) {\n      var files = data.content;\n      if (files.length) {\n        var sharedFile = $(\"li#shared-list-item\");\n        sharedFile.addClass(\"d-none\");\n        for (var i = 0; i < files.length; i++) {\n          var fileNameAttachments = files[i].title;\n          if (fileNameAttachments.length > 10) {\n            fileNameAttachments =\n              fileNameAttachments.substring(0, 10) + \"[...]\";\n          }\n          if (i < 5) {\n            var cloneTemplateShareFile = sharedFile.clone();\n            cloneTemplateShareFile\n              .removeClass(\"d-none\")\n              .appendTo(\"ul.shared-resources\");\n            cloneTemplateShareFile\n              .find(\"span#name-shared-files\")\n              .html(\n                \"<a href='\" +\n                  baseUrl +\n                  \"/api/attachments/\" +\n                  files[i].id +\n                  \"'>\" +\n                  fileNameAttachments +\n                  \"</a>\"\n              );\n          } else {\n            break;\n          }\n        }\n        sharedFile\n          .parent()\n          .parent()\n          .parent()\n          .find(\".card-footer\")\n          .find(\"a\")\n          .attr(\"href\", \"shared-files.html\");\n      } else {\n        $(\"ul.shared-resources\")\n          .html(\"<li class='mt-3'>You don't have any shared files!</li>\")\n          .addClass(\"list-unstyled mb-3\")\n          .parent()\n          .parent()\n          .find(\".card-footer\")\n          .find(\"a\")\n          .attr(\"href\", \"shared-files.html\");\n      }\n    },\n  });\n}\n$(document).on(\"click\", \"button.edit-info-button\", function () {\n  $(\"input#edit-profile-picture-input\").val(\"\");\n  $(\"span#file-name-profile-picture-edit\").html(\"\");\n  $(\".domains-list\").html(\n    \"<div class='col-md-6' id='check-domain'><input class='w-25' id='domain-checkbox' type='checkbox'/>\" +\n      \"<span id='domain-name'></span>\" +\n      \"</div>\"\n  );\n  editProfileInfo();\n});\nfunction editProfileInfo() {\n  let userId = $.cookie(\"authUserId\");\n  let authToken = $.cookie(\"authToken\");\n  $.ajax({\n    type: \"GET\",\n    url: baseUrl + \"/api/users/\" + userId,\n    headers: { Authorization: \"Bearer \" + authToken },\n    crossDomain: true,\n    success: function (data) {\n      console.log(data);\n      var existingDomains = data.domains;\n      // get all domains\n      $.ajax({\n        type: \"GET\",\n        url: baseUrl + \"/api/domains\",\n        headers: { Authorization: \"Bearer \" + authToken },\n        beforeSend: function (xhr) {\n          xhr.setRequestHeader(\"Authorization\", \"Bearer \" + authToken);\n        },\n        success: function (response) {\n          var allDomains = response;\n          var domainHtml = $(\"#check-domain\");\n          domainHtml.hide();\n          for (var i = 0; i < allDomains.length; i++) {\n            var domainTemplate = domainHtml.clone();\n            domainTemplate.show().appendTo(\".domains-list\");\n            domainTemplate.find(\"#domain-name\").html(allDomains[i].name);\n            domainTemplate\n              .find(\"input\")\n              .attr(\"data-domain-id\", allDomains[i].id);\n            for (var j = 0; j < existingDomains.length; j++) {\n              if (allDomains[i].id === existingDomains[j].id) {\n                domainTemplate.find(\"input\").attr(\"checked\", \"true\");\n              }\n            }\n            $(domainTemplate.find(\"input\")).bind(\"click\", function () {\n              $(this).attr(\"checked\", $(this).is(\":checked\"));\n            });\n          }\n        },\n        error: function () {\n          alert(\"Domains listing failed!\");\n        },\n      });\n\n      // display modal infos\n      $(\"input#edit-details-name\").val(data.name);\n      $(\"input#edit-details-country\").val(data.locationCountry);\n      $(\"input#edit-details-city\").val(data.locationCity);\n    },\n  });\n}\n\nvar attachEditPostProfile = function (event) {\n  var editPostProfile = document.getElementById(\"editPostProfile\");\n  editPostProfile.src = URL.createObjectURL(event.target.files[0]);\n  output.onload = function () {\n    URL.revokeObjectURL(editPostProfile.src); // free memory\n  };\n};\n\nfunction sortAddMember() {\n  $(document).on(\"keyup\", \"input#search-members\", function () {\n    var value = $(this).val().toLowerCase();\n    $(\"div#container-add-members\")\n      .children()\n      .each(function () {\n        var name = $(this).text().toLowerCase();\n\n        $(this).toggle(name.toLowerCase().indexOf(value) > -1);\n      });\n  });\n}\n\nvar editProfilePicture = function (event) {\n  var attachEditProfilePicture = document.getElementById(\n    \"attachEditProfilePicture\"\n  );\n  attachEditProfilePicture.src = URL.createObjectURL(event.target.files[0]);\n  attachEditProfilePicture.onload = function () {\n    URL.revokeObjectURL(attachEditProfilePicture.src); // free memory\n  };\n};\nvar createProfilePostAttach = function (event) {\n  var attachCreatePost = document.getElementById(\"attachCreateProfilePost\");\n  attachCreatePost.src = URL.createObjectURL(event.target.files[0]);\n  attachCreatePost.onload = function () {\n    URL.revokeObjectURL(attachCreatePost.src); // free memory\n  };\n};\n"],"file":"profile.js"}